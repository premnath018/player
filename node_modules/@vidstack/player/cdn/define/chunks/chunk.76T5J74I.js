import{a as g}from"./chunk.VDAPKEID.js";import{$ as c,B as h,K as l,M as d,a as i,b as n,m as a,oa as u,p,pa as y,qa as r}from"./chunk.DPV5XUTO.js";var e=class extends y{constructor(){super();this.viewportEnterDelay=0;this.pageChangeType="state";this.pageEnterDelay=0;this.intersectionThreshold=1;this.Yt=!1;this.Z=new a;this.Jt=!1;this.intersectionController=new l(this,{root:this.intersectionRoot?document.querySelector(this.intersectionRoot):null,threshold:this.intersectionThreshold},t=>{window.clearTimeout(this.Xt);let s=t[0];this.Yt=s.isIntersecting,this.Jt&&(s.isIntersecting?this.Xt=window.setTimeout(()=>{this.Gi(this.enterViewport),this.Xt=void 0},this.viewportEnterDelay):this.exitViewport&&(this.Yt=!1,this.Wi(this.exitViewport))),this.Jt=!0,this.zi()});this.pageController=new d(this,({state:t,visibility:s})=>{if(window.clearTimeout(this.Zt),!this.isIntersecting)return;(this.pageChangeType==="state"?t:s)==="hidden"?this.Wi(this.exitPage):this.enterPage&&(this.Zt=window.setTimeout(()=>{this.Gi(this.enterPage),this.Zt=void 0},this.pageEnterDelay)),this.zi()});h(this,g,(t,s)=>{this.Kt(t,s)})}static get styles(){return u`:host{display:contents}`}get isIntersecting(){return this.Yt}disconnectedCallback(){super.disconnectedCallback(),this.Jt=!1,this.Z.empty()}render(){return n`<slot></slot>`}get provider(){return this.r}Kt(t,s){this.r=t;let o=this.intersectionController.observe(t);s(()=>{o(),this.r=void 0,this.Z.empty()})}Gi(t){!this.r||(t==="play"?this.r.paused=!1:t==="unmute"&&(this.r.muted=!1))}Wi(t){!this.r||(t==="pause"?this.r.paused=!0:t==="mute"&&(this.r.muted=!0))}zi(){!this.r||this.dispatchEvent(p("vds-media-visibility-change",{bubbles:!0,composed:!0,detail:{provider:this.r,viewport:{isIntersecting:this.isIntersecting},page:{state:this.pageController.state,visibility:this.pageController.visibility}}}))}};i([r({attribute:"enter-viewport"})],e.prototype,"enterViewport",2),i([r({attribute:"exit-viewport"})],e.prototype,"exitViewport",2),i([r({type:Number,attribute:"viewport-enter-delay"})],e.prototype,"viewportEnterDelay",2),i([r({attribute:"enter-page"})],e.prototype,"enterPage",2),i([r({attribute:"exit-page"})],e.prototype,"exitPage",2),i([r({attribute:"page-change-type"})],e.prototype,"pageChangeType",2),i([r({type:Number,attribute:"page-enter-delay"})],e.prototype,"pageEnterDelay",2),i([r({attribute:"intersection-root"})],e.prototype,"intersectionRoot",2),i([r({type:Number,attribute:"intersection-threshold"})],e.prototype,"intersectionThreshold",2);c("vds-media-visibility",e);
