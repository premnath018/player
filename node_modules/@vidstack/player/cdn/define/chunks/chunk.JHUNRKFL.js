import{a as C}from"./chunk.DL736G7V.js";import{a as E}from"./chunk.W5E4CIVK.js";import{F as v,G as f,H as V,J as R,V as p,a as o,aa as y,b,ba as d,ca as h,m as k,n as s,na as g,oa as w,p as u,pa as A,qa as n}from"./chunk.DPV5XUTO.js";var P=w`*{box-sizing:border-box;touch-action:none}:host{display:block;contain:layout;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}:host([hidden]){display:none}:host(:focus){outline:0}:host(:focus-visible){outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}:host(.focus-visible){outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}`;var x=(i=>(i[i.Left=-1]="Left",i[i.ArrowLeft=-1]="ArrowLeft",i[i.Up=-1]="Up",i[i.ArrowUp=-1]="ArrowUp",i[i.Right=1]="Right",i[i.ArrowRight=1]="ArrowRight",i[i.Down=1]="Down",i[i.ArrowDown=1]="ArrowDown",i))(x||{}),r=class extends A{constructor(){super();this.js=C.provide(this);this.disabled=!1;this.value=50;this.ii=1;this.dr=1;this.shiftKeyMultiplier=5;this.customValueText=!1;this.c=new E(this);this.J=new k;this.eo=s(this,"pointerenter",()=>{this.disabled||(this.setAttribute("pointing",""),this.store.pointing.set(!0))});this.to=s(this,"pointermove",t=>{if(this.disabled||this.isDragging)return;let e=this.We(t);this.store.pointerValue.set(e),this.ze(t)});this.io=s(this,"pointerleave",()=>{this.disabled||(this.removeAttribute("pointing"),this.store.pointing.set(!1))});this.ro=s(this,"pointerdown",t=>{this.disabled||(this.zs(t),this.si(t))});this.so=s(this,"keydown",t=>{if(this.disabled)return;let{key:e,shiftKey:a}=t;if(!Object.keys(x).includes(e))return;let l=a?this.keyboardStep*this.shiftKeyMultiplier:this.keyboardStep,m=Number(x[e]),i=l*m,N=(this.value+i)/this.step,$=this.step*N;this.value=this.ur($),this.Ge(t)});this.no=s(this,"vds-slider-value-change",this.ri.bind(this));this.oo=s(this,"vds-slider-pointer-value-change",this.lr.bind(this));this.si=g(t=>{if(this.disabled||!this.isDragging)return;let e=this.We(t);this.store.pointerValue.set(e),this.ze(t)});this.ao=s(this,"pointerup",t=>{this.disabled||!this.isDragging||this.Ks(t)},{target:document});this.lo=s(this,"touchmove",t=>{this.disabled||!this.isDragging||t.preventDefault()},{target:document,passive:!1});this.uo=s(this,"pointermove",t=>{this.disabled||!this.isDragging||this.si(t)},{target:document});this.vr=this.value;this.Ge=g(t=>{this.value!==this.vr&&(this.dispatchEvent(u("vds-slider-value-change",{detail:this.value,triggerEvent:t})),this.vr=this.value)});this.mr=this.pointerValue;this.ze=g(t=>{if(this.pointerValue===this.mr)return;["vds-slider-pointer-value-change",this.isDragging&&"vds-slider-drag-value-change"].forEach(a=>{a&&this.dispatchEvent(u(a,{detail:this.pointerValue,triggerEvent:t}))}),this.mr=this.pointerValue});R(this)}static get styles(){return[P]}static get parts(){return[]}get store(){return this.js.value}get min(){return p(this.store.min)}set min(t){this.store.min.set(t)}get max(){return p(this.store.max)}set max(t){this.store.max.set(t)}get step(){return this.ii}set step(t){this.ii=t}get keyboardStep(){return this.dr}set keyboardStep(t){this.dr=t}get isDragging(){return p(this.store.dragging)}get fillRate(){let t=this.max-this.min,e=this.value-this.min;return t>0?e/t:0}get fillPercent(){return this.fillRate*100}get pointerValue(){return p(this.store.pointerValue)}get pointerRate(){let t=this.max-this.min,e=this.pointerValue-this.min;return t>0?e/t:0}get pointerPercent(){return this.pointerRate*100}connectedCallback(){super.connectedCallback(),this.Gs(),this.ri(),this.lr(),this.J.add(this.store.interactive.subscribe(t=>{y(this,"interactive",t)}))}willUpdate(t){(t.has("value")||t.has("min")||t.has("max"))&&(this.value=this.ur(this.value),this.store.value.set(this.value),this.ri(),this.Ge()),t.has("disabled")&&this.disabled&&(this.store.dragging.set(!1),this.store.pointing.set(!1),this.removeAttribute("dragging"),this.removeAttribute("pointing"),this.removeAttribute("interactive"),y(this,"aria-disabled",this.disabled)),this.customValueText||this.Ws(),super.willUpdate(t)}disconnectedCallback(){this.si.cancel(),this.J.empty(),super.disconnectedCallback()}ri(){h(this,"fill-value",`${this.value}`),h(this,"fill-rate",`${this.fillRate}`),h(this,"fill-percent",`${this.fillPercent}%`)}lr(){h(this,"pointer-value",`${this.pointerValue}`),h(this,"pointer-rate",`${this.pointerRate}`),h(this,"pointer-percent",`${this.pointerPercent}%`)}render(){return this.Qs()}Qs(){return b`${this.ti()}`}ti(){return b`<slot></slot>`}Gs(){d(this,"role","slider"),d(this,"tabindex","0"),d(this,"aria-orientation","horizontal"),d(this,"autocomplete","off")}Ws(){this.setAttribute("aria-valuemin",this.cr()),this.setAttribute("aria-valuenow",this.hr()),this.setAttribute("aria-valuemax",this.pr()),this.setAttribute("aria-valuetext",this.Qe())}cr(){return String(this.min)}hr(){return String(this.value)}pr(){return String(this.max)}Qe(){return`${v(this.value/this.max*100,2)}%`}zs(t){if(this.isDragging)return;this.store.dragging.set(!0),this.setAttribute("dragging","");let e=this.We(t);this.store.pointerValue.set(e),this.ze(t),this.dispatchEvent(u("vds-slider-drag-start",{triggerEvent:t,detail:this.value})),this.c.pauseUserIdle(t)}Ks(t){if(!this.isDragging)return;this.store.dragging.set(!1),this.Ge.cancel(),this.removeAttribute("dragging");let e=this.We(t);this.value=e,this.store.pointerValue.set(e),this.Ge(t),this.ze(t),this.dispatchEvent(u("vds-slider-drag-end",{triggerEvent:t,detail:this.value})),this.c.resumeUserIdle(t)}ur(t){return f(this.min,v(t,V(this.step)),this.max)}Ys(t){let e=f(0,t,1),c=(this.max-this.min)*e,l=Math.round(c/this.step),m=this.step*l;return this.min+m}We(t){let e=t.clientX,{left:a,width:c}=this.getBoundingClientRect(),l=(e-a)/c;return this.Ys(l)}};o([n({type:Number})],r.prototype,"min",1),o([n({type:Number})],r.prototype,"max",1),o([n({reflect:!0,type:Boolean})],r.prototype,"disabled",2),o([n({type:Number})],r.prototype,"value",2),o([n({type:Number})],r.prototype,"step",1),o([n({attribute:"keyboard-step",type:Number})],r.prototype,"keyboardStep",1),o([n({attribute:"shift-key-multiplier",type:Number})],r.prototype,"shiftKeyMultiplier",2),o([n({type:Boolean,attribute:"custom-value-text"})],r.prototype,"customValueText",2);export{r as a};
