var Cr=Object.defineProperty;var Sr=Object.getOwnPropertyDescriptor;var a=(i,t,e,r)=>{for(var s=r>1?void 0:r?Sr(t,e):t,n=i.length-1,o;n>=0;n--)(o=i[n])&&(s=(r?o(t,e,s):o(s))||s);return r&&s&&Cr(t,e,s),s};var qt,Ze=window,Le=Ze.trustedTypes,bi=Le?Le.createPolicy("lit-html",{createHTML:i=>i}):void 0,K=`lit$${(Math.random()+"").slice(9)}$`,It="?"+K,xr=`<${It}>`,Me=document,Fe=(i="")=>Me.createComment(i),qe=i=>i===null||typeof i!="object"&&typeof i!="function",Mi=Array.isArray,_i=i=>Mi(i)||typeof i?.[Symbol.iterator]=="function",Ne=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ei=/-->/g,wi=/>/g,ne=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Ci=/'/g,Si=/"/g,Ti=/^(?:script|style|textarea|title)$/i,ki=i=>(t,...e)=>({me:i,strings:t,values:e}),x=ki(1),ds=ki(2),Y=Symbol.for("lit-noChange"),S=Symbol.for("lit-nothing"),xi=new WeakMap,Pi=(i,t,e)=>{var r,s;let n=(r=e?.renderBefore)!==null&&r!==void 0?r:t,o=n.xr;if(o===void 0){let u=(s=e?.renderBefore)!==null&&s!==void 0?s:null;n.xr=o=new ee(t.insertBefore(Fe(),u),u,void 0,e??{})}return o.w(i),o},xe=Me.createTreeWalker(Me,129,null,!1),Ri=(i,t)=>{let e=i.length-1,r=[],s,n=t===2?"<svg>":"",o=Ne;for(let c=0;c<e;c++){let h=i[c],E,f,w=-1,T=0;for(;T<h.length&&(o.lastIndex=T,f=o.exec(h),f!==null);)T=o.lastIndex,o===Ne?f[1]==="!--"?o=Ei:f[1]!==void 0?o=wi:f[2]!==void 0?(Ti.test(f[2])&&(s=RegExp("</"+f[2],"g")),o=ne):f[3]!==void 0&&(o=ne):o===ne?f[0]===">"?(o=s??Ne,w=-1):f[1]===void 0?w=-2:(w=o.lastIndex-f[2].length,E=f[1],o=f[3]===void 0?ne:f[3]==='"'?Si:Ci):o===Si||o===Ci?o=ne:o===Ei||o===wi?o=Ne:(o=ne,s=void 0);let G=o===ne&&i[c+1].startsWith("/>")?" ":"";n+=o===Ne?h+xr:w>=0?(r.push(E),h.slice(0,w)+"$lit$"+h.slice(w)+K+G):h+K+(w===-2?(r.push(void 0),c):G)}let u=n+(i[e]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[bi!==void 0?bi.createHTML(u):u,r]},oe=class{constructor({strings:t,me:e},r){let s;this.parts=[];let n=0,o=0,u=t.length-1,c=this.parts,[h,E]=Ri(t,e);if(this.el=oe.createElement(h,r),xe.currentNode=this.el.content,e===2){let f=this.el.content,w=f.firstChild;w.remove(),f.append(...w.childNodes)}for(;(s=xe.nextNode())!==null&&c.length<u;){if(s.nodeType===1){if(s.hasAttributes()){let f=[];for(let w of s.getAttributeNames())if(w.endsWith("$lit$")||w.startsWith(K)){let T=E[o++];if(f.push(w),T!==void 0){let G=s.getAttribute(T.toLowerCase()+"$lit$").split(K),Se=/([.?@])?(.*)/.exec(T);c.push({type:1,index:n,name:Se[2],strings:G,ctor:Se[1]==="."?tt:Se[1]==="?"?it:Se[1]==="@"?rt:le})}else c.push({type:6,index:n})}for(let w of f)s.removeAttribute(w)}if(Ti.test(s.tagName)){let f=s.textContent.split(K),w=f.length-1;if(w>0){s.textContent=Le?Le.emptyScript:"";for(let T=0;T<w;T++)s.append(f[T],Fe()),xe.nextNode(),c.push({type:2,index:++n});s.append(f[w],Fe())}}}else if(s.nodeType===8)if(s.data===It)c.push({type:2,index:n});else{let f=-1;for(;(f=s.data.indexOf(K,f+1))!==-1;)c.push({type:7,index:n}),f+=K.length-1}n++}}static createElement(t,e){let r=Me.createElement("template");return r.innerHTML=t,r}};function ae(i,t,e=i,r){var s,n,o,u;if(t===Y)return t;let c=r!==void 0?(s=e.hi)===null||s===void 0?void 0:s[r]:e.Pr,h=qe(t)?void 0:t.nt;return c?.constructor!==h&&((n=c?.pi)===null||n===void 0||n.call(c,!1),h===void 0?c=void 0:(c=new h(i),c.ot(i,e,r)),r!==void 0?((o=(u=e).hi)!==null&&o!==void 0?o:u.hi=[])[r]=c:e.Pr=c),c!==void 0&&(t=ae(i,c.Lr(i,t.values),c,r)),t}var et=class{constructor(t,e){this.v=[],this.x=void 0,this.vi=t,this.d=e}get parentNode(){return this.d.parentNode}get E(){return this.d.E}p(t){var e;let{el:{content:r},parts:s}=this.vi,n=((e=t?.creationScope)!==null&&e!==void 0?e:Me).importNode(r,!0);xe.currentNode=n;let o=xe.nextNode(),u=0,c=0,h=s[0];for(;h!==void 0;){if(u===h.index){let E;h.type===2?E=new ee(o,o.nextSibling,this,t):h.type===1?E=new h.ctor(o,h.name,h.strings,this,t):h.type===6&&(E=new st(o,this,t)),this.v.push(E),h=s[++c]}u!==h?.index&&(o=xe.nextNode(),u++)}return n}m(t){let e=0;for(let r of this.v)r!==void 0&&(r.strings!==void 0?(r.w(t,r,e),e+=r.strings.length-2):r.w(t[e])),e++}},ee=class{constructor(t,e,r,s){var n;this.type=2,this.n=S,this.x=void 0,this.G=t,this.te=e,this.d=r,this.options=s,this.mi=(n=s?.isConnected)===null||n===void 0||n}get E(){var t,e;return(e=(t=this.d)===null||t===void 0?void 0:t.E)!==null&&e!==void 0?e:this.mi}get parentNode(){let t=this.G.parentNode,e=this.d;return e!==void 0&&t.nodeType===11&&(t=e.parentNode),t}get startNode(){return this.G}get endNode(){return this.te}w(t,e=this){t=ae(this,t,e),qe(t)?t===S||t==null||t===""?(this.n!==S&&this.fe(),this.n=S):t!==this.n&&t!==Y&&this.$(t):t.me!==void 0?this.T(t):t.nodeType!==void 0?this.k(t):_i(t)?this.O(t):this.$(t)}S(t,e=this.te){return this.G.parentNode.insertBefore(t,e)}k(t){this.n!==t&&(this.fe(),this.n=this.S(t))}$(t){this.n!==S&&qe(this.n)?this.G.nextSibling.data=t:this.k(Me.createTextNode(t)),this.n=t}T(t){var e;let{values:r,me:s}=t,n=typeof s=="number"?this.Tr(t):(s.el===void 0&&(s.el=oe.createElement(s.h,this.options)),s);if(((e=this.n)===null||e===void 0?void 0:e.vi)===n)this.n.m(r);else{let o=new et(n,this),u=o.p(this.options);o.m(r),this.k(u),this.n=o}}Tr(t){let e=xi.get(t.strings);return e===void 0&&xi.set(t.strings,e=new oe(t)),e}O(t){Mi(this.n)||(this.n=[],this.fe());let e=this.n,r,s=0;for(let n of t)s===e.length?e.push(r=new ee(this.S(Fe()),this.S(Fe()),this,this.options)):r=e[s],r.w(n),s++;s<e.length&&(this.fe(r&&r.te.nextSibling,s),e.length=s)}fe(t=this.G.nextSibling,e){var r;for((r=this.oe)===null||r===void 0||r.call(this,!1,!0,e);t&&t!==this.te;){let s=t.nextSibling;t.remove(),t=s}}setConnected(t){var e;this.d===void 0&&(this.mi=t,(e=this.oe)===null||e===void 0||e.call(this,t))}},le=class{constructor(t,e,r,s,n){this.type=1,this.n=S,this.x=void 0,this.element=t,this.name=e,this.d=s,this.options=n,r.length>2||r[0]!==""||r[1]!==""?(this.n=Array(r.length-1).fill(new String),this.strings=r):this.n=S}get tagName(){return this.element.tagName}get E(){return this.d.E}w(t,e=this,r,s){let n=this.strings,o=!1;if(n===void 0)t=ae(this,t,e,0),o=!qe(t)||t!==this.n&&t!==Y,o&&(this.n=t);else{let u=t,c,h;for(t=n[0],c=0;c<n.length-1;c++)h=ae(this,u[r+c],e,c),h===Y&&(h=this.n[c]),o||(o=!qe(h)||h!==this.n[c]),h===S?t=S:t!==S&&(t+=(h??"")+n[c+1]),this.n[c]=h}o&&!s&&this.P(t)}P(t){t===S?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},tt=class extends le{constructor(){super(...arguments),this.type=3}P(t){this.element[this.name]=t===S?void 0:t}},Lr=Le?Le.emptyScript:"",it=class extends le{constructor(){super(...arguments),this.type=4}P(t){t&&t!==S?this.element.setAttribute(this.name,Lr):this.element.removeAttribute(this.name)}},rt=class extends le{constructor(t,e,r,s,n){super(t,e,r,s,n),this.type=5}w(t,e=this){var r;if((t=(r=ae(this,t,e,0))!==null&&r!==void 0?r:S)===Y)return;let s=this.n,n=t===S&&s!==S||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,o=t!==S&&(s===S||n);n&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,t),this.n=t}handleEvent(t){var e,r;typeof this.n=="function"?this.n.call((r=(e=this.options)===null||e===void 0?void 0:e.host)!==null&&r!==void 0?r:this.element,t):this.n.handleEvent(t)}},st=class{constructor(t,e,r){this.element=t,this.type=6,this.x=void 0,this.d=e,this.options=r}get E(){return this.d.E}w(t){ae(this,t)}},Di={A:"$lit$",M:K,C:It,L:1,R:Ri,D:et,V:_i,I:ae,H:ee,N:le,U:it,B:rt,F:tt,W:st},Li=Ze.litHtmlPolyfillSupport;Li?.(oe,ee),((qt=Ze.litHtmlVersions)!==null&&qt!==void 0?qt:Ze.litHtmlVersions=[]).push("2.3.1");var _e=i=>i??S;var de=Mr;function Mr(i,t,e){var r=null,s=null,n=function(){r&&(clearTimeout(r),s=null,r=null)},o=function(){var c=s;n(),c&&c()},u=function(){if(!t)return i.apply(this,arguments);var c=this,h=arguments,E=e&&!r;if(n(),s=function(){i.apply(c,h)},r=setTimeout(function(){if(r=null,!E){var f=s;return s=null,f()}},t),E)return s()};return u.cancel=n,u.flush=o,u}var Ie=_r;function _r(i,t,e){var r=null,s=null,n=e&&e.leading,o=e&&e.trailing;n==null&&(n=!0),o==null&&(o=!n),n==!0&&(o=!1);var u=function(){r&&(clearTimeout(r),r=null)},c=function(){var E=s;u(),E&&E()},h=function(){var E=n&&!r,f=this,w=arguments;if(s=function(){return i.apply(f,w)},r||(r=setTimeout(function(){if(r=null,o)return s()},t)),E)return E=!1,s()};return h.cancel=u,h.flush=c,h}function C(i,t,e,r){return i.addEventListener(t,e,r),()=>{i.removeEventListener(t,e,r)}}function Bt(i,t){return t.some(e=>i?.type.includes(e)??!1)}function Ni(i){return Bt(i,["pointer"])}function jt(i){return Bt(i,["touch"])}function Fi(i){return Bt(i,["click","mouse"])}var g=class{constructor(){this.s=this.s??[]}add(...i){i&&i.forEach(t=>{this.s.push(t)})}empty(){this.s.forEach(i=>i()),this.s=[]}};function p(i,t,e,r){let s;function n(){s||(s=C(r?.target??i,t,e,r))}n(),i.addController({hostConnected(){n()},hostDisconnected(){s?.(),s=void 0}})}var dt=class extends CustomEvent{constructor(i,t={}){super(i,t),this.triggerEvent=t.triggerEvent,this.hasOwnProperty("originEvent")||Object.defineProperties(this,{originEvent:{get(){return nt(this)??this}},isOriginTrusted:{get(){return nt(this)?.isTrusted??!1}}})}get originEvent(){return nt(this)??this}get isOriginTrusted(){return this.originEvent?.isTrusted??!1}};function l(i,t={}){return new dt(i,t)}function nt(i){let t=i.triggerEvent;for(;t&&t.triggerEvent;)t=t.triggerEvent;return t}function M(i,t){(nt(i)??i).triggerEvent=t}function Ue(i,t){if(t.bubbles&&t.composed)return;let e=new dt(t.type,{triggerEvent:t.triggerEvent??t,detail:t.detail,bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed});i.dispatchEvent(e)}var lt=new Map,Tr=class{constructor(i,t,e){this.i=i,this.initialValue=t,this.at=e,this.ut=[],i.addController({hostConnected:()=>{this.kr()},hostDisconnected:()=>{delete this.i[this.id]}})}get id(){return this.at.id}get value(){return this.i[this.id]??this.initialValue}get registered(){return this.id in this.i}kr(){if(this.id in this.i)return;let i=t=>{this.i[this.id]=t,this.ut?.forEach(e=>e(t)),this.ut=void 0};if(this.i.dispatchEvent(l("vds-context-consumer-connect",{bubbles:!0,composed:!0,detail:{id:this.id,setValue:i}})),!this.registered){let t=lt.get(this.id)??[];t.push({host:this.i,setValue:i}),lt.set(this.id,t)}}whenRegistered(i){if(this.registered){i(this.value);return}this.ut?.push(i)}};function kr(i,t){let e=lt.get(i)??[],r=e.filter(({host:s})=>t.contains(s));return lt.set(i,e.filter(({host:s})=>!t.contains(s))),r}var Pr=class{constructor(i,t,e){this.i=i,this.Hn=t,this.at=e,this.fi=new g,this.ht=t(),i.addController({hostConnected:this.start.bind(this),hostDisconnected:this.stop.bind(this)})}get id(){return this.at.id}get value(){return this.ht}start(){let i=C(this.i,"vds-context-consumer-connect",this.Rr.bind(this));for(let t of kr(this.id,this.i))t.setValue(this.ht);this.fi.add(i)}stop(){this.fi.empty()}Rr(i){let t=i.detail;t.id===this.id&&(i.stopImmediatePropagation(),t.setValue(this.ht))}};function ke(i){let t=Symbol("@vidstack/context");return{id:t,consume(e){return new Tr(e,i(),{id:t})},provide(e){return new Pr(e,i,{id:t})}}}function Ut(i){return typeof i?.id=="symbol"&&i.id.description==="@vidstack/context"}function qi(i){return _e(i===""||i==="undefined"?void 0:i)}function H(...i){}function Rr(i,t){return i!=i?t==t:i!==t||i&&typeof i=="object"||typeof i=="function"}function Gt(i){return i===null}function v(i){return typeof i>"u"}function D(i){return Gt(i)||v(i)}function ie(i){return typeof i=="number"&&!Number.isNaN(i)}function q(i){return typeof i=="string"}function j(i){return typeof i=="function"}function Ii(i){return Array.isArray(i)}var ot=new Map,at=new Map;function Dr(i,t,e){for(let{host:r,callback:s}of Array.from(ot.get(t)??[]))r!==i&&r.contains(i)&&s(i,e)}function Ar(i,t){return Array.from(at.get(t)??[]).filter(({element:e})=>i!==e&&i.contains(e))}function Pe(i,t,e){let r={host:i,callback:e};i.addController({hostConnected:()=>{for(let{element:s,onDisconnect:n}of Ar(i,t))e(s,n);ot.set(t,(ot.get(t)??new Set).add(r))},hostDisconnected:()=>{ot.get(t)?.delete(r)}})}function ct(i,t,e={}){let r=e.register,s=new g,n=u=>{s.add(u)},o={element:i,onDisconnect:n};i.addController({hostConnected(){let u=l(t,{bubbles:!0,composed:!0,detail:o});i.dispatchEvent(u),r&&(at.set(r,(at.get(r)??new Set).add(o)),Dr(i,r,n))},hostDisconnected(){s.empty(),r&&at.get(r)?.delete(o)}})}var W=typeof window<"u",ut=W?window.navigator?.userAgent.toLowerCase():"",Wt=/iphone|ipad|ipod|ios|CriOS|FxiOS/.test(ut),bs=/android/.test(ut);var Es=W&&/(iPhone|iPod)/gi.test(window.navigator?.platform),ws=/firefox/.test(ut),Vr=W&&!!window.chrome,Cs=W&&!Vr&&(window.safari||Wt||/(apple|safari)/.test(ut)),Ss=W&&window.location.protocol!=="file:"?`${window.location.protocol}//${window.location.hostname}`:void 0;function Hr(){return W&&!v(screen.orientation)&&j(screen.orientation.lock)&&j(screen.orientation.unlock)}function Or(){return window?.MediaSource??window?.WebKitMediaSource}function Nr(){return window?.SourceBuffer??window?.WebKitSourceBuffer}function zt(){let i=Or();if(v(i))return!1;let t=i&&j(i.isTypeSupported)&&i.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),e=Nr(),r=v(e)||!v(e.prototype)&&j(e.prototype.appendBuffer)&&j(e.prototype.remove);return!!t&&!!r}var xs=`
  ${["a[href]","area[href]","input:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","iframe","object","embed","*[tabindex]:not([tabindex='-1'])","*[contenteditable=true]","vds-fullscreen-button","vds-mute-button","vds-play-button","vds-slider","vds-time-slider","vds-volume-slider"].join(", ")}
`;var O={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},Ai=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],Vi=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],Hi=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],V=typeof window<"u"&&typeof window.document<"u"?window.document:{},F="fullscreenEnabled"in V&&Object.keys(O)||Ai[0]in V&&Ai||Vi[0]in V&&Vi||Hi[0]in V&&Hi||[],Fr={requestFullscreen:function(i){return i[F[O.requestFullscreen]]()},requestFullscreenFunction:function(i){return i[F[O.requestFullscreen]]},get exitFullscreen(){return V[F[O.exitFullscreen]].bind(V)},get fullscreenPseudoClass(){return":"+F[O.fullscreen]},addEventListener:function(i,t,e){return V.addEventListener(F[O[i]],t,e)},removeEventListener:function(i,t,e){return V.removeEventListener(F[O[i]],t,e)},get fullscreenEnabled(){return Boolean(V[F[O.fullscreenEnabled]])},set fullscreenEnabled(i){},get fullscreenElement(){return V[F[O.fullscreenElement]]},set fullscreenElement(i){},get onfullscreenchange(){return V[("on"+F[O.fullscreenchange]).toLowerCase()]},set onfullscreenchange(i){return V[("on"+F[O.fullscreenchange]).toLowerCase()]=i},get onfullscreenerror(){return V[("on"+F[O.fullscreenerror]).toLowerCase()]},set onfullscreenerror(i){return V[("on"+F[O.fullscreenerror]).toLowerCase()]=i}},ce=Fr;var Ls=Symbol("@vidstack/grouped-log");var qr="@vidstack/log-colors",Ms=Ir();function Ir(){if(W&&!v(window.localStorage)){let i={};try{i=JSON.parse(localStorage.getItem(qr)??"")}catch{}return new Map(Object.entries(i))}return new Map}var _s=Object.freeze({silent:0,error:1,warn:2,info:3,debug:4}),Ts=Object.freeze({silent:"white",error:"hsl(6, 58%, 50%)",warn:"hsl(51, 58%, 50%)",info:"hsl(219, 58%, 50%)",debug:"hsl(280, 58%, 50%)"});function ue(i,t=2){return Number(i.toFixed(t))}function Be(i,t,e){return Math.max(i,Math.min(e,t))}function je(i){return String(i).split(".")[1]?.length??0}var $r=1e3,Ur=$r*60,Br=Ur*60,ks=Br*24;var Re=class{constructor(i,t){this.i=i,this.mt=t,this.z=void 0,this.b=new g,i.addController({hostDisconnected:this.Ee.bind(this)})}async Ee(){this.isFullscreen&&await this.exitFullscreen(),this.b.empty()}get isSupported(){return this.isSupportedNatively}get isSupportedNatively(){return ce.fullscreenEnabled}get isFullscreen(){return this.isNativeFullscreen}get isNativeFullscreen(){if(ce.fullscreenElement===this.i)return!0;try{return this.i.matches(ce.fullscreenPseudoClass)}catch{return!1}}ft(i){if(!this.isSupported)return H;let t=C(ce,"fullscreenchange",i);return()=>{t()}}gt(i){if(!this.isSupported)return H;let t=C(ce,"fullscreenerror",i);return()=>{t()}}async enterFullscreen(){if(this.isFullscreen)return;this.bi(),this.b.add(this.ft(this.yt.bind(this))),this.b.add(this.gt(this.wi.bind(this)));let i=await this.Et();return await this.Hr(),i}async Et(){return ce.requestFullscreen(this.i)}yt(i){this.isFullscreen||this.b.empty(),this.i.dispatchEvent(l("vds-fullscreen-change",{bubbles:!0,composed:!0,detail:this.isFullscreen,triggerEvent:i}))}wi(i){this.i.dispatchEvent(l("vds-fullscreen-error",{bubbles:!0,composed:!0,triggerEvent:i}))}async exitFullscreen(){if(!this.isFullscreen)return;this.bi();let i=await this.bt();return await this.Or(),i}async bt(){return ce.exitFullscreen()}Ci(){return this.mt.canOrient&&!v(this.screenOrientationLock)}async Hr(){v(this.screenOrientationLock)||!this.Ci()||await this.mt.lock(this.screenOrientationLock)}async Or(){!this.Ci()||await this.mt.unlock()}bi(){if(!this.isSupported)throw Error("Fullscreen API is not enabled or supported in this environment.")}},jr=class{constructor(i){this.i=i;let t=new g,e=!1;t.add(C(document,"pointerdown",()=>{e=!1})),p(i,"keydown",r=>{r.metaKey||r.altKey||r.ctrlKey||(e=!0)}),p(i,"focus",r=>{e&&i.classList.add("focus-visible")}),p(i,"blur",r=>{i.classList.remove("focus-visible")}),i.addController({hostDisconnected:()=>{t.empty()}})}};function ht(i){return new jr(i)}var Qt=class{constructor(i,t={},e=()=>!0,r=void 0){this.i=i,this.wt=e,this.z=r,this.Ct=!1,this.St=!1;let{target:s,skipInitial:n,...o}=t;this.ie=s??void 0,this.Ct=n??this.Ct,window.IntersectionObserver&&(this.be=new IntersectionObserver(u=>{let c=this.St;this.St=!1,!(this.Ct&&c)&&(this.handleChanges(u),this.i.requestUpdate())},o),i.addController(this))}handleChanges(i){this.value=this.wt(i,this.be)}hostConnected(){this.ie&&this.observe(this.ie)}hostDisconnected(){this.Nr()}async hostUpdated(){let i=this.be.takeRecords();i.length&&this.handleChanges(i)}observe(i){return this.be.observe(i),this.St=!0,()=>{this.be.unobserve(i)}}Nr(){this.be.disconnect()}};function $i(...i){return new Qt(...i)}var Oi=typeof window<"u"&&typeof window.safari=="object"&&window?.safari.pushNotification,Ui=class{constructor(i,t,e=void 0){this.i=i,this.wt=t,this.z=e,this.Q=this.Mt(),this.we=document.visibilityState,this.s=new g,i.addController(this)}get state(){return this.Q}get visibility(){return this.we}hostConnected(){let i=["focus","blur","visibilitychange","pageshow","pagehide"];this.Q=this.Mt(),this.we=document.visibilityState,i.forEach(t=>{let e=C(window,t,this.Fr.bind(this));this.s.add(e)}),Oi&&this.s.add(C(window,"beforeunload",t=>{this.Ir=setTimeout(()=>{t.defaultPrevented||t.returnValue.length>0||(this.Q="hidden",this.we="hidden",this.Si())},0)}))}hostDisconnected(){this.s.empty()}Fr(i){Oi&&window.clearTimeout(this.Ir);let t=this.Q,e=this.we;(i.type!=="blur"||this.state==="active")&&(this.Q=this.Mt(i),this.we=document.visibilityState=="hidden"?"hidden":"visible"),(this.state!==t||this.visibility!==e)&&this.Si()}Si(){this.wt({state:this.state,visibility:this.visibility})}Mt(i){return i?.type==="blur"||document.visibilityState==="hidden"?"hidden":document.hasFocus()?"active":"passive"}};function $e(){let i=H,t=H;return{promise:new Promise((r,s)=>{i=r,t=s}),resolve:i,reject:t}}var re=class{constructor(){this.ae=new Map,this.Ve=[],this.xt=$e(),this.Ce=!1}get isServing(){return this.Ce}get size(){return this.ae.size}async waitForFlush(){this.Ce||await this.xt.promise}queue(i,t){if(this.Ce){t();return}this.Ve=[...this.Ve.filter(e=>e!==i),i],this.ae.set(i,t)}serve(i){this.ae.get(i)?.(),this.ae.delete(i)}start(){this.Mi(),this.Ce=!0,this.ae.size>0&&this.Mi()}Mi(){for(let i of this.Ve)this.serve(i);this.Ve=[],this.xi()}Ur(){this.ae.clear()}xi(){this.xt.resolve(),this.xt=$e()}stop(){this.Ce=!1}destroy(){this.stop(),this.Ur(),this.xi()}};function pt(i){let t=new re;return i.addController({hostConnected:t.start.bind(t),hostDisconnected:t.destroy.bind(t)}),t}var mt=class{constructor(i){this.i=i,this.De=!1,this.z=void 0,this.Pi(),this.b=new g,i.addController({hostConnected:this.$r.bind(this),hostDisconnected:this.Ee.bind(this)})}async $r(){this.Pi(),this.Br()}async Ee(){this.canOrient&&this.De&&await this.unlock(),this.b.empty()}get currentOrientation(){return this.Pt}get canOrient(){return Hr()}get isLocked(){return this.De}async lock(i){this.Li(),await screen.orientation.lock(i),this.De=!0,this.i.dispatchEvent(l("vds-screen-orientation-lock-change",{bubbles:!0,composed:!0,detail:i}))}async unlock(){this.Li(),await screen.orientation.unlock(),this.De=!1,this.i.dispatchEvent(l("vds-screen-orientation-lock-change",{bubbles:!0,composed:!0,detail:screen.orientation.type}))}Br(){!this.canOrient||this.b.add(this.jr())}jr(){return C(screen.orientation,"change",this.Gr.bind(this))}Gr(i){this.Pt=window.screen.orientation.type,this.i.dispatchEvent(l("vds-screen-orientation-change",{bubbles:!0,composed:!0,detail:this.Pt,triggerEvent:i}))}Pi(){this.Pt=W?window.screen?.orientation?.type:void 0}Li(){if(!this.canOrient)throw Error("Screen orientation API is not available.")}};function z(i){return Object.keys(i)}function Kt(i,t,e){let r,s,n=()=>{s=(r?.value??t).subscribe(e)};Ut(t)&&(r=t.consume(i)),i.addController({hostConnected(){Ut(t)?r.whenRegistered(n):n()},hostDisconnected(){s?.()}})}var Te=[];function Gr(i,t){return{initialValue:i,subscribe:I(i,t).subscribe}}function I(i,t=H){let e,r=new Set;function s(u){if(Rr(i,u)&&(i=u,e)){let c=!Te.length;for(let h of r)h[1](),Te.push(h,i);if(c){for(let h=0;h<Te.length;h+=2)Te[h][0](Te[h+1]);Te.length=0}}}function n(u){s(u(i))}function o(u,c=H){let h=[u,c];return r.add(h),r.size===1&&(e=t(s)||H),u(i),()=>{r.delete(h),r.size===0&&(e?.(),e=null)}}return{initialValue:i,set:s,update:n,subscribe:o}}function De(i,t,e){let r=!Array.isArray(i),s=r?[i]:i,n=t.length<2;return Gr(e,o=>{let u=!1,c=[],h=0,E=H,f=()=>{if(h)return;E();let T=t(r?c[0]:c,o);n?o(T):E=j(T)?T:H},w=s.map((T,G)=>T.subscribe(Se=>{c[G]=Se,h&=~(1<<G),u&&f()},()=>{h|=1<<G}));return u=!0,f(),function(){w.forEach(G=>G()),E()}})}function te(i){let t;return i.subscribe(e=>t=e)(),t}function ft(i,t,e,r){if(Ut(t)){let s=t.consume(i),n,o=()=>{n=s.value[e].subscribe(r)};i.addController({hostConnected:()=>{s.whenRegistered(o)},hostDisconnected:()=>{n?.()}})}else return Kt(i,t[e],r)}function vt(i,t){for(let e of z(i)){let r=i[e],s=t[e];if(!r||!s)continue;let n=te(r),o=te(s);n!==o&&s.set(n)}}function Ge(i){return new Proxy(i,{get(t,e){return te(t[e])},has(t,e){return Reflect.has(t,e)},ownKeys(t){return Reflect.ownKeys(t)},getOwnPropertyDescriptor(t,e){return Reflect.getOwnPropertyDescriptor(t,e)}})}function Bi(i,t){return i.length===t.length&&i.every((e,r)=>e===t[r])}function Yt(i){return new Promise(t=>{let e=window.requestAnimationFrame(async()=>{await i?.(),t(e)})})}function m(i,t,e=W){let r=e&&!v(window.customElements.get(i));!e||r||window.customElements.define(i,t)}function k(i,t,e){if(D(e)||e===!1)i.removeAttribute(t);else{let r=q(e)?e:"";i.setAttribute(t,r)}}function P(i,t,e){i.hasAttribute(t)||i.setAttribute(t,e)}function he(i,t,e,r="vds"){i.style.setProperty(`--${r}-${t}`,e||null)}function ji(i,t){let e=t?`slot[name="${t}"]`:"slot:not([name])",s=i.shadowRoot?.querySelector(e)?.assignedNodes({flatten:!0})??[];return Array.prototype.filter.call(s,n=>n.nodeType==Node.ELEMENT_NODE)}function gt(i){let t=window.requestIdleCallback??(e=>e());document.readyState==="complete"?t(i):window.addEventListener("load",()=>{t(i)},{once:!0})}function We(i){return i?.type.startsWith("key")??!1}function Gi(i){return We(i)&&(i.key==="Enter"||i.key===" ")}async function Wr(i){let t=document.querySelector(`script[src="${i}"]`);if(!Gt(t))return;let e=document.createElement("script"),r=$e();e.src=i,e.onload=r.resolve,e.onerror=r.reject;let s=document.getElementsByTagName("script")[0];return D(s.parentNode)||s.parentNode.insertBefore(e,s),r.promise}function yt(i,t="preconnect",e=W){if(!e)return!1;let r=document.querySelector(`link[href="${i}"]`);if(!Gt(r))return!0;let s=document.createElement("link");return s.rel=t,s.href=i,s.crossOrigin="true",document.head.append(s),!0}var Jt=class{static async load(i){return new Promise((t,e)=>{if(this.pendingRequests[i]){this.pendingRequests[i].push({resolve:t,reject:e});return}this.pendingRequests[i]=[{resolve:t,reject:e}],Wr(i).then(()=>{this.pendingRequests[i].forEach(r=>r.resolve()),delete this.pendingRequests[i]}).catch(r=>{this.pendingRequests[i].forEach(s=>s.reject(r)),delete this.pendingRequests[i]})})}};Jt.pendingRequests={};function Wi(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function zi(i){return i.replace(/-./g,t=>t[1].toUpperCase())}function $t(i,t){let e=String(i),r=e.length;if(r<t){let n=t-r;return`${"0".repeat(n)}${i}`}return e}function Qi(i){let t=Math.trunc(i/3600),e=Math.trunc(i%3600/60),r=Math.trunc(i%60),s=Number((i-Math.trunc(i)).toPrecision(3));return{hours:t,minutes:e,seconds:r,fraction:s}}function bt(i,t=!1,e=!1){let{hours:r,minutes:s,seconds:n}=Qi(i),o=t?$t(r,2):r,u=$t(s,2),c=$t(n,2);return r>0||e?`${o}:${u}:${c}`:`${s}:${c}`}function Xt(i){let t=[],{hours:e,minutes:r,seconds:s}=Qi(i),n=(o,u)=>o===1?u:`${u}s`;return e>0&&t.push(`${e} ${n(e,"hour")}`),r>0&&t.push(`${r} ${n(r,"minute")}`),(s>0||t.length===0)&&t.push(`${s} ${n(s,"second")}`),t.join(", ")}function Et(i){let t,e=()=>!v(t),r=()=>{v(t)||(window.cancelAnimationFrame(t),t=void 0)};function s(...n){e()||(t=window.requestAnimationFrame(()=>{i.apply(this,n),t=void 0}))}return s.cancel=r,s.pending=e,s}var wt=window,Ct=wt.ShadowRoot&&(wt.ShadyCSS===void 0||wt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Zt=Symbol(),Ki=new WeakMap,ze=class{constructor(t,e,r){if(this.Wr=!0,r!==Zt)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o,e=this.t;if(Ct&&t===void 0){let r=e!==void 0&&e.length===1;r&&(t=Ki.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&Ki.set(e,t))}return t}toString(){return this.cssText}},Yi=i=>new ze(typeof i=="string"?i:i+"",void 0,Zt),b=(i,...t)=>{let e=i.length===1?i[0]:t.reduce((r,s,n)=>r+(o=>{if(o.Wr===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+i[n+1],i[0]);return new ze(e,i,Zt)},ei=(i,t)=>{Ct?i.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):t.forEach(e=>{let r=document.createElement("style"),s=wt.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=e.cssText,i.appendChild(r)})},St=Ct?i=>i:i=>i instanceof CSSStyleSheet?(t=>{let e="";for(let r of t.cssRules)e+=r.cssText;return Yi(e)})(i):i;var ti,xt=window,Ji=xt.trustedTypes,zr=Ji?Ji.emptyScript:"",Xi=xt.reactiveElementPolyfillSupport,ri={toAttribute(i,t){switch(t){case Boolean:i=i?zr:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,t){let e=i;switch(t){case Boolean:e=i!==null;break;case Number:e=i===null?null:Number(i);break;case Object:case Array:try{e=JSON.parse(i)}catch{e=null}}return e}},Zi=(i,t)=>t!==i&&(t==t||i==i),ii={attribute:!0,type:String,converter:ri,reflect:!1,hasChanged:Zi},J=class extends HTMLElement{constructor(){super(),this.qe=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this.de=null,this.u()}static addInitializer(t){var e;(e=this.h)!==null&&e!==void 0||(this.h=[]),this.h.push(t)}static get observedAttributes(){this.finalize();let t=[];return this.elementProperties.forEach((e,r)=>{let s=this.Ti(r,e);s!==void 0&&(this.ki.set(s,r),t.push(s))}),t}static createProperty(t,e=ii){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){let r=typeof t=="symbol"?Symbol():"__"+t,s=this.getPropertyDescriptor(t,r,e);s!==void 0&&Object.defineProperty(this.prototype,t,s)}}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(s){let n=this[t];this[e]=s,this.requestUpdate(t,n,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||ii}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;let t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this.ki=new Map,this.hasOwnProperty("properties")){let e=this.properties,r=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(let s of r)this.createProperty(s,e[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){let e=[];if(Array.isArray(t)){let r=new Set(t.flat(1/0).reverse());for(let s of r)e.unshift(St(s))}else t!==void 0&&e.push(St(t));return e}static Ti(t,e){let r=e.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}u(){var t;this.Lt=new Promise(e=>this.enableUpdating=e),this.le=new Map,this.zr(),this.requestUpdate(),(t=this.constructor.h)===null||t===void 0||t.forEach(e=>e(this))}addController(t){var e,r;((e=this.re)!==null&&e!==void 0?e:this.re=[]).push(t),this.renderRoot!==void 0&&this.isConnected&&((r=t.hostConnected)===null||r===void 0||r.call(t))}removeController(t){var e;(e=this.re)===null||e===void 0||e.splice(this.re.indexOf(t)>>>0,1)}zr(){this.constructor.elementProperties.forEach((t,e)=>{this.hasOwnProperty(e)&&(this.qe.set(e,this[e]),delete this[e])})}createRenderRoot(){var t;let e=(t=this.shadowRoot)!==null&&t!==void 0?t:this.attachShadow(this.constructor.shadowRootOptions);return ei(e,this.constructor.elementStyles),e}connectedCallback(){var t;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this.re)===null||t===void 0||t.forEach(e=>{var r;return(r=e.hostConnected)===null||r===void 0?void 0:r.call(e)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this.re)===null||t===void 0||t.forEach(e=>{var r;return(r=e.hostDisconnected)===null||r===void 0?void 0:r.call(e)})}attributeChangedCallback(t,e,r){this.Tt(t,r)}Qr(t,e,r=ii){var s;let n=this.constructor.Ti(t,r);if(n!==void 0&&r.reflect===!0){let o=(((s=r.converter)===null||s===void 0?void 0:s.toAttribute)!==void 0?r.converter:ri).toAttribute(e,r.type);this.de=t,o==null?this.removeAttribute(n):this.setAttribute(n,o),this.de=null}}Tt(t,e){var r;let s=this.constructor,n=s.ki.get(t);if(n!==void 0&&this.de!==n){let o=s.getPropertyOptions(n),u=typeof o.converter=="function"?{fromAttribute:o.converter}:((r=o.converter)===null||r===void 0?void 0:r.fromAttribute)!==void 0?o.converter:ri;this.de=n,this[n]=u.fromAttribute(e,o.type),this.de=null}}requestUpdate(t,e,r){let s=!0;t!==void 0&&(((r=r||this.constructor.getPropertyOptions(t)).hasChanged||Zi)(this[t],e)?(this.le.has(t)||this.le.set(t,e),r.reflect===!0&&this.de!==t&&(this.Se===void 0&&(this.Se=new Map),this.Se.set(t,r))):s=!1),!this.isUpdatePending&&s&&(this.Lt=this.Kr())}async Kr(){this.isUpdatePending=!0;try{await this.Lt}catch(e){Promise.reject(e)}let t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this.qe&&(this.qe.forEach((s,n)=>this[n]=s),this.qe=void 0);let e=!1,r=this.le;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(t=this.re)===null||t===void 0||t.forEach(s=>{var n;return(n=s.hostUpdate)===null||n===void 0?void 0:n.call(s)}),this.update(r)):this.kt()}catch(s){throw e=!1,this.kt(),s}e&&this.Yr(r)}willUpdate(t){}Yr(t){var e;(e=this.re)===null||e===void 0||e.forEach(r=>{var s;return(s=r.hostUpdated)===null||s===void 0?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}kt(){this.le=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.Lt}shouldUpdate(t){return!0}update(t){this.Se!==void 0&&(this.Se.forEach((e,r)=>this.Qr(r,this[r],e)),this.Se=void 0),this.kt()}updated(t){}firstUpdated(t){}};J.finalized=!0,J.elementProperties=new Map,J.elementStyles=[],J.shadowRootOptions={mode:"open"},Xi?.({ReactiveElement:J}),((ti=xt.reactiveElementVersions)!==null&&ti!==void 0?ti:xt.reactiveElementVersions=[]).push("1.4.1");var si,ni;var y=class extends J{constructor(){super(...arguments),this.renderOptions={host:this},this.Rt=void 0}createRenderRoot(){var t,e;let r=super.createRenderRoot();return(t=(e=this.renderOptions).renderBefore)!==null&&t!==void 0||(e.renderBefore=r.firstChild),r}update(t){let e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this.Rt=Pi(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this.Rt)===null||t===void 0||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this.Rt)===null||t===void 0||t.setConnected(!1)}render(){return Y}};y.finalized=!0,y.On=!0,(si=globalThis.litElementHydrateSupport)===null||si===void 0||si.call(globalThis,{LitElement:y});var er=globalThis.litElementPolyfillSupport;er?.({LitElement:y});((ni=globalThis.litElementVersions)!==null&&ni!==void 0?ni:globalThis.litElementVersions=[]).push("3.2.2");var Qr=(i,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(e){e.createProperty(t.key,i)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(e){e.createProperty(t.key,i)}};function d(i){return(t,e)=>e!==void 0?((r,s,n)=>{s.constructor.createProperty(n,r)})(i,t,e):Qr(i,t)}function _(i){return d({...i,state:!0})}var oi,yn=((oi=window.HTMLSlotElement)===null||oi===void 0?void 0:oi.prototype.assignedElements)!=null?(i,t)=>i.assignedElements(t):(i,t)=>i.assignedNodes(t).filter(e=>e.nodeType===Node.ELEMENT_NODE);var Lt=ke(()=>I(void 0));function Kr(i,t,e){if(!ie(t)||t<0||t>e)throw new Error(`Failed to execute '${i}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${e}).`)}function tr(i,t,e,r){return Kr(i,r,e.length-1),e[r][t]}function ai(i){if(v(i)||i.length===0){let t=()=>{throw new Error("This TimeRanges object is empty")};return{length:0,start:t,end:t}}return{length:i.length,start:tr.bind(null,"start",0,i),end:tr.bind(null,"end",1,i)}}function Mt(i,t){return Ii(i)?ai(i):v(i)||v(t)?ai():ai([[i,t]])}var _t={autoplay:!1,autoplayError:void 0,buffered:Mt(),duration:0,bufferedAmount:0,canLoad:!1,canPlay:!1,canFullscreen:!1,controls:!1,poster:"",currentSrc:"",currentTime:0,ended:!1,error:void 0,fullscreen:!1,userIdle:!1,loop:!1,mediaType:"unknown",muted:!1,paused:!0,played:Mt(),playing:!1,playsinline:!1,seekable:Mt(),seekableAmount:0,seeking:!1,src:[],started:!1,viewType:"unknown",volume:1,waiting:!1};function Tt(){let i={};for(let t of z(_t))i[t]=I(_t[t]);return i}var Yr=new Set(["autoplay","canFullscreen","canLoad","controls","currentSrc","loop","muted","playsinline","poster","src","viewType","volume"]);function ir(i){z(i).forEach(t=>{Yr.has(t)||i[t].set(i[t].initialValue)})}function rr(i){for(let t of z(_t))i[t].set(_t[t])}var pe=ke(Tt);function L(i,t,e){return ft(i,pe,t,e)}var me=Symbol("@vidstack/media-provider-discovery"),R=class extends y{constructor(){super();this.J=new g;this.z=void 0;this.loading="visible";this.He=!1;this.controllerQueue=new re;this.e=Tt();this.Q=Ge(this.e);this.connectedQueue=pt(this);this.mediaQueue=new re;this.screenOrientationController=new mt(this);this.fullscreenController=new Re(this,this.screenOrientationController);ct(this,"vds-media-provider-connect",{register:me});let e=$i(this,{target:this,threshold:0},r=>{if(!/(visible|lazy)/.test(this.loading)){e.hostDisconnected();return}r[0]?.isIntersecting&&(this.startLoadingMedia(),e.hostDisconnected())})}connectedCallback(){super.connectedCallback(),this.Jr(),window.requestAnimationFrame(()=>{v(this.canLoadPoster)&&(this.canLoadPoster=!0)})}firstUpdated(e){super.firstUpdated(e),this.dispatchEvent(l("vds-fullscreen-support-change",{detail:this.canFullscreen})),this.canLoad||this.loading==="eager"?window?.requestAnimationFrame(()=>{this.startLoadingMedia()}):this.loading==="idle"&&gt(()=>{this.startLoadingMedia()})}render(){return x`<slot @slotchange="${this.handleDefaultSlotChange}"></slot>`}disconnectedCallback(){this.Ri(this.e),this.mediaQueue.destroy(),this.J.empty(),super.disconnectedCallback(),Yt(()=>{Yt(()=>{this.isConnected||this.destroy()})})}Ri(e){e.paused.set(!0),e.playing.set(!1),e.seeking.set(!1),e.waiting.set(!1),e.fullscreen.set(!1)}destroy(){this.isConnected&&this.disconnectedCallback(),this.dispatchEvent(l("vds-destroy"))}Jr(){}get volume(){return this.Xr()}set volume(e){this.mediaQueue.queue("volume",()=>{let r=this.volume,s=Be(0,e,1);r!==s&&(this.Zr(s),this.requestUpdate("volume",r))})}get paused(){return this.es()}set paused(e){this.mediaQueue.queue("paused",()=>{if(this.paused!==e)try{e?this.pause():this.play(),this.requestUpdate("paused",!e)}catch(r){this.z?.error("paused-change-fail",r)}})}get currentTime(){return this.ts()}set currentTime(e){this.mediaQueue.queue("current-time",()=>{let r=this.currentTime;r!==e&&(this._i(e),this.requestUpdate("currentTime",r))})}get muted(){return this.is()}set muted(e){this.mediaQueue.queue("muted",()=>{let r=this.muted;r!==e&&(this.rs(e),this.requestUpdate("muted",r))})}get poster(){return this.state.poster}set poster(e){let r=this.poster;r!==e&&(this.dispatchEvent(l("vds-poster-change",{detail:e})),this.requestUpdate("poster",r))}get loop(){return this.state.loop}set loop(e){let r=this.loop;r!==e&&(this.dispatchEvent(l("vds-loop-change",{detail:e})),this.requestUpdate("loop",r))}get controls(){return this.state.controls}set controls(e){let r=this.controls;r!==e&&(this.dispatchEvent(l("vds-controls-change",{detail:e})),this.requestUpdate("controls",r))}get canLoad(){return this.state.canLoad}startLoadingMedia(){this.state.canPlay||this.dispatchEvent(l("vds-can-load"))}ss(){if(!this.state.canPlay)throw Error("Media is not ready - wait for `vds-can-play` event.")}async ns(){if(!(!this.state.ended||this.state.currentTime===0))return this._i(0)}Nn(){if(this.state.viewType!=="video")throw Error("Player is currently not in a video view.")}async Vi({event:e,duration:r}){this.state.canPlay||(this.dispatchEvent(l("vds-can-play",{triggerEvent:e,detail:{duration:r}})),this.mediaQueue.start(),await this.Di())}Ae(e,r){this.state.currentSrc!==e&&(this.mediaQueue.stop(),this.dispatchEvent(l("vds-current-src-change",{detail:e,triggerEvent:r})))}get autoplay(){return this.state.autoplay}set autoplay(e){this.autoplay!==e&&(this.dispatchEvent(l("vds-autoplay-change",{detail:e})),this.requestUpdate("autoplay",!e)),this.Di()}get os(){return this.state.canPlay&&this.state.autoplay&&!this.state.started}async Di(){if(!!this.os){this.He=!0;try{await this.play(),this.dispatchEvent(l("vds-autoplay",{detail:{muted:this.muted}}))}catch(e){this.dispatchEvent(l("vds-autoplay-fail",{detail:{muted:this.muted,error:e}})),this.requestUpdate()}this.He=!1}}get controller(){return this._}get logLevel(){return this._?.logLevel??"silent"}set logLevel(e){}get idleDelay(){return this._?.idleDelay??0}set idleDelay(e){this.controllerQueue.queue("idle-delay",()=>{this._.idleDelay=e})}attachMediaController(e,r){this._=e,this.e=e.e,this.Q=e.state,this.controllerQueue.start(),r(()=>{this.controllerQueue.destroy(),this.e=Tt(),this.Q=Ge(this.e),this._&&(vt(this._.e,this.e),this.Ri(this._.e)),this._=void 0})}dispatchEvent(e){return!this._&&e.type.startsWith("vds-")&&e.type!=="vds-destroy"?(this.controllerQueue.queue(e.type,()=>{super.dispatchEvent(e)}),!1):super.dispatchEvent(e)}store(){return this.e}get state(){return this.Q}get canFullscreen(){return this.fullscreenController.isSupported}get fullscreen(){return this.fullscreenController.isFullscreen}get fullscreenOrientation(){return this.fullscreenController.screenOrientationLock}set fullscreenOrientation(e){let r=this.fullscreenController.screenOrientationLock;r!==e&&(this.fullscreenController.screenOrientationLock=e,this.requestUpdate("fullscreen-orientation",r))}enterFullscreen(){return this.fullscreenController.enterFullscreen()}exitFullscreen(){return this.fullscreenController.exitFullscreen()}};a([d({type:Number})],R.prototype,"volume",1),a([d({type:Boolean})],R.prototype,"paused",1),a([d({type:Number})],R.prototype,"currentTime",1),a([d({type:Boolean})],R.prototype,"muted",1),a([d()],R.prototype,"poster",1),a([d({type:Boolean})],R.prototype,"loop",1),a([d({type:Boolean})],R.prototype,"controls",1),a([_()],R.prototype,"canLoadPoster",2),a([d({attribute:"loading"})],R.prototype,"loading",2),a([d({type:Boolean})],R.prototype,"autoplay",1),a([d({attribute:"log-level"})],R.prototype,"logLevel",1),a([d({attribute:"idle-delay",type:Number})],R.prototype,"idleDelay",1),a([d({attribute:"fullscreen-orientation"})],R.prototype,"fullscreenOrientation",1);var kt=class{constructor(t,e){this.i=t;this.q=e;this.qi=!1;this.Hi=!1;this.Oi=!1;this.s=new g;this.delay=2e3;t.addController(this)}get paused(){return this.Oi||this.Hi}set paused(t){this.Oi=t,this.Oe()}hostConnected(){this.s.add(this.q.paused.subscribe(e=>{this.Hi=e,this.Oe()})),["pointerdown","pointermove","focus","keydown"].forEach(e=>{let r=C(this.i,e,this.Oe.bind(this));this.s.add(r)})}hostDisconnected(){this.s.empty(),this._t()}Oe(){this.paused?this._t():this.as()}as(){this._t(),this.Ai=window.setTimeout(()=>{this.Ni(!this.paused)},this.delay)}_t(){window.clearTimeout(this.Ai),this.Ni(!1)}Ni(t){this.qi!==t&&(this.i.dispatchEvent(l("vds-user-idle-change",{detail:t})),this.qi=t)}};var Pt=class{constructor(t){this.i=t;this.J=new g;this.providerQueue=new re;this.providerDisposal=new g;this.ls=void 0;this.z=void 0;this.Fi=Lt.provide(this.i);this.Ui=pe.provide(this.i);this.state=Ge(this.e);this.Ne=new kt(this.i,this.e);this.Oe=p(this.i,"vds-user-idle-change",t=>{this.e.userIdle.set(t.detail),this.j("userIdle",t)});this.a={loading:[],play:[],pause:[],volume:[],fullscreen:[],seeked:[],seeking:[],userIdle:[]};this.Fn=p(this.i,"vds-start-loading",this.y("loading",t=>{this.state.canLoad||(this.a.loading.push(t),this.r.startLoadingMedia())}));this.In=p(this.i,"vds-mute-request",this.y("muted",t=>{this.state.muted||(this.a.volume.push(t),this.provider.muted=!0)}));this.Un=p(this.i,"vds-unmute-request",this.y("muted",t=>{!this.state.muted||(this.a.volume.push(t),this.provider.muted=!1,this.state.volume===0&&(this.a.volume.push(t),this.provider.volume=.25))}));this.$n=p(this.i,"vds-play-request",this.y("paused",t=>{!this.state.paused||(this.a.play.push(t),this.provider.paused=!1)}));this.Bn=p(this.i,"vds-pause-request",this.y("paused",t=>{this.state.paused||(this.a.pause.push(t),this.provider.paused=!0)}));this.At=!1;this.jn=p(this.i,"vds-seeking-request",this.y("seeking",t=>{this.ne(),this.a.seeking.push(t),this.At=!0,this.e.seeking.set(!0)}));this.Gn=p(this.i,"vds-seek-request",this.y("seeking",t=>{this.store.ended&&(this.ue=!0),this.a.seeked.push(t),this.At=!1;let e=t.detail;this.state.duration-t.detail<.25&&(e=this.state.duration),this.provider.currentTime=e}));this.Wn=p(this.i,"vds-volume-change-request",this.y("volume",t=>{let e=t.detail;this.state.volume!==e&&(this.a.volume.push(t),this.provider.volume=e,e>0&&this.state.muted&&(this.a.volume.push(t),this.provider.muted=!1))}));this.zn=p(this.i,"vds-enter-fullscreen-request",this.y("fullscreen",async t=>{if(this.state.fullscreen)return;(t.detail??"media")==="media"&&this.i.canFullscreen?(this.a.fullscreen.push(t),await this.i.enterFullscreen?.()):this.provider&&(this.a.fullscreen.push(t),await this.provider.enterFullscreen())}));this.Qn=p(this.i,"vds-exit-fullscreen-request",this.y("fullscreen",async t=>{if(!this.state.fullscreen)return;(t.detail??"media")==="media"&&this.i.canFullscreen?(this.a.fullscreen.push(t),await this.i.exitFullscreen?.()):this.provider&&(this.a.fullscreen.push(t),await this.provider.exitFullscreen())}));this.Kn=p(this.i,"vds-resume-user-idle-request",t=>{!this.qt(t)||(this.a.userIdle.push(t),this.Ne.paused=!1)});this.Yn=p(this.i,"vds-pause-user-idle-request",t=>{!this.qt(t)||(this.a.userIdle.push(t),this.Ne.paused=!0)});this.Jn=p(this.i,"vds-show-poster-request",this.y("poster",()=>{this.r.canLoadPoster=!0}));this.Xn=p(this.i,"vds-hide-poster-request",this.y("poster",()=>{this.r.canLoadPoster=!1}));this.cs=this.y("loop",()=>{window.requestAnimationFrame(async()=>{try{this.X=!0,this.ue=!0,await this.r.play()}catch{this.ue=!1,this.X=!1}})});this.yt=p(this.i,"vds-fullscreen-change",t=>{this.e.fullscreen.set(t.detail),t.target===this.i&&(this.j("fullscreen",t),this.r?.dispatchEvent(l("vds-fullscreen-change",{detail:t.detail,triggerEvent:t})))});this.wi=p(this.i,"vds-fullscreen-error",t=>{t.target===this.i&&(this.j("fullscreen",t),this.r?.dispatchEvent(l("vds-fullscreen-error",{detail:t.detail,triggerEvent:t})))});this.ue=!1;this.X=!1;this.Fe=!1;this.f=[];this.Bt=Ie(t=>{this.f.push(t),this.e.seeking.set(!0),this.e.currentTime.set(t.detail),this.j("seeking",t)},150,{leading:!0});this.Bi=de(()=>{if(!this.Me)return;this.Fe=!0;let t=l("vds-waiting",this.Me);this.f.push(t),this.e.waiting.set(!0),this.e.playing.set(!1),this.r?.dispatchEvent(t),this.Me=void 0,this.Fe=!1},300);this.Vt=!0;Pe(t,me,(e,r)=>{this.attachMediaProvider(e,r)}),t.addController({hostConnected:()=>{this.state.canPlay||this.i.setAttribute("aria-busy","true")},hostDisconnected:()=>{this.se(),this.ds(),this.providerQueue.destroy(),this.providerDisposal.empty(),this.Vt=!0,this.J.empty()}})}get logLevel(){return this.ls?.logLevel??"silent"}set logLevel(t){}get provider(){return this.r}attachMediaProvider(t,e){!D(this.provider)||this.provider===t||(this.Ii(),this.r=t,this.Fi.value.set(t),vt(this.r.e,this.e),this.Dt(),t.attachMediaController(this,r=>this.J.add(r)),this.us(),e(this.Ii.bind(this)))}Ii(){D(this.provider)||(this.ne(),this.providerQueue.destroy(),this.providerDisposal.empty(),this.r=void 0,this.Fi.value.set(void 0),rr(this.e),this.e.viewType.set("unknown"))}us(){this.providerQueue.start(),this.providerDisposal.add(()=>{this.providerQueue.stop()})}get store(){return this.Ui.value}get e(){return this.Ui.value}get idleDelay(){return this.Ne.delay}set idleDelay(t){this.Ne.delay=t}ds(){z(this.a).forEach(t=>{this.a[t]=[]})}j(t,e){let r=this.a[t].shift();r&&(e.requestEvent=r,M(e,r))}qt(t){return t.stopPropagation(),!0}y(t,e){return r=>{if(!!this.qt(r)){if(this.r){e(r);return}this.providerQueue.queue(t,()=>{e(r)})}}}Dt(){if(!this.r)return;let t={"vds-can-load":this.hs,"vds-load-start":this.Ht,"vds-loaded-data":this.Ot,"vds-loaded-metadata":this.xe,"vds-can-play":this.Pe,"vds-can-play-through":this.Nt,"vds-current-src-change":this.Ae,"vds-autoplay":this.ps,"vds-autoplay-fail":this.vs,"vds-loop-request":this.cs,"vds-play":this.Ft,"vds-play-fail":this.ms,"vds-playing":this.It,"vds-pause":this.Ut,"vds-time-update":this.fs,"vds-volume-change":this.$t,"vds-seeking":this.Bt,"vds-seeked":this.jt,"vds-waiting":this.Gt,"vds-ended":this.Wt,"vds-autoplay-change":this.gs,"vds-error":this.Le,"vds-fullscreen-support-change":this.ys,"vds-poster-change":this.Es,"vds-loop-change":this.bs,"vds-playsinline-change":this.Ie,"vds-controls-change":this.ws,"vds-media-type-change":this.Cs,"vds-view-type-change":this.Ss,"vds-duration-change":this.zt,"vds-progress":this.Qt,"vds-src-change":this.ce};for(let e of z(t)){let r=t[e].bind(this);this.providerDisposal.add(C(this.r,e,r))}}se(){this.ue=!1,this.X=!1,this.Fe=!1,this.Me=void 0,this.f=[]}l(t){return this.f[this.f.map(e=>e.type).lastIndexOf(t)]}hs(t){this.e.canLoad.set(!0),this.f.push(t),this.j("loading",t)}$i(t){this.e.currentSrc.set(t.currentSrc),this.e.mediaType.set(t.mediaType),this.e.viewType.set(t.viewType)}Ht(t){this.$i(t.detail),this.f.push(t),M(t,this.l("vds-src-change")),M(t,this.l("vds-can-load"))}Ot(t){this.f.push(t),M(t,this.l("vds-load-start"))}xe(t){this.$i(t.detail),this.f.push(t),M(t,this.l("vds-load-start"))}Pe(t){this.f.push(t),t.triggerEvent?.type!=="loadedmetadata"&&M(t,this.l("vds-loaded-metadata")),this.e.canPlay.set(!0),this.e.duration.set(t.detail.duration),this.i.setAttribute("aria-busy","false")}Nt(t){this.e.canPlay.set(!0),this.e.duration.set(t.detail.duration),M(t,this.l("vds-can-play"))}ps(t){this.f.push(t),M(t,this.l("vds-play")),M(t,this.l("vds-can-play")),this.e.autoplayError.set(void 0)}vs(t){M(t,this.l("vds-play-fail")),M(t,this.l("vds-can-play")),this.e.autoplayError.set(t.detail),this.se()}Ft(t){if(this.X||!this.state.paused){t.stopImmediatePropagation();return}if(this.f.push(t),M(t,this.l("vds-waiting")),this.j("play",t),this.e.paused.set(!1),this.e.autoplayError.set(void 0),this.state.ended||this.ue){this.ue=!1,this.e.ended.set(!1);let e=l("vds-replay",{triggerEvent:t});this.r?.dispatchEvent(e)}}ms(t){this.f.push(t),this.ne(),M(t,this.l("vds-play")),this.e.paused.set(!0),this.e.playing.set(!1),this.j("play",t),this.se()}It(t){this.f.push(t);let e=this.l("vds-play");if(e?(M(t,this.l("vds-waiting")),M(t,e)):M(t,this.l("vds-seeked")),this.ne(),this.se(),this.e.paused.set(!1),this.e.playing.set(!0),this.e.seeking.set(!1),this.e.ended.set(!1),this.X){t.stopImmediatePropagation(),this.X=!1;return}this.state.started||(this.e.started.set(!0),this.r?.dispatchEvent(l("vds-started",{triggerEvent:t})))}Ut(t){if(this.X){t.stopImmediatePropagation();return}M(t,this.l("vds-seeked")),this.j("pause",t),this.e.paused.set(!0),this.e.playing.set(!1),this.e.seeking.set(!1),this.ne(),this.se()}fs(t){let{currentTime:e,played:r}=t.detail;this.e.currentTime.set(e),this.e.played.set(r),this.e.waiting.set(!1)}$t(t){this.e.volume.set(t.detail.volume),this.e.muted.set(t.detail.muted||t.detail.volume===0),this.j("volume",t)}jt(t){this.At?(this.e.seeking.set(!0),t.stopImmediatePropagation()):this.state.seeking&&(this.f.push(t),M(t,this.l("vds-waiting")),M(t,this.l("vds-seeking")),this.state.paused&&this.ne(),this.e.seeking.set(!1),t.detail!==this.state.duration&&this.e.ended.set(!1),this.e.currentTime.set(t.detail),this.j("seeked",t))}ne(){this.Bi.cancel(),this.e.waiting.set(!1)}Gt(t){this.Fe||(t.stopImmediatePropagation(),this.Me=t,this.Bi())}Wt(t){if(this.X){t.stopImmediatePropagation();return}this.ne(),this.e.paused.set(!0),this.e.playing.set(!1),this.e.seeking.set(!1),this.e.ended.set(!0),this.se()}gs(t){this.e.autoplay.set(t.detail)}Ae(t){if(this.e.currentSrc.set(t.detail),this.Vt){this.Vt=!1;return}this.se(),ir(this.e),this.i.setAttribute("aria-busy","true")}Le(t){this.e.error.set(t.detail)}ys(t){this.e.canFullscreen.set(t.detail)}Es(t){this.e.poster.set(t.detail)}bs(t){this.e.loop.set(t.detail)}Ie(t){this.e.playsinline.set(t.detail)}ws(t){this.e.controls.set(t.detail)}Cs(t){this.e.mediaType.set(t.detail)}zt(t){let e=t.detail;this.e.duration.set(isNaN(e)?0:e)}Qt(t){let{buffered:e,seekable:r}=t.detail,s=e.length===0?0:e.end(e.length-1),n=r.length===0?0:r.end(r.length-1);this.e.buffered.set(e),this.e.bufferedAmount.set(s),this.e.seekable.set(r),this.e.seekableAmount.set(n)}ce(t){this.e.src.set(t.detail)}Ss(t){this.e.viewType.set(t.detail)}};var Ae=class{constructor(t,e,r){this.i=t;this.e=e;this.ji=r;this.s=new g;this.i.addController({hostConnected:this.Ms.bind(this),hostDisconnected:this.xs.bind(this)})}Ms(){gt(()=>{for(let t of this.ji){let e=this.e[t];if(e){let r=this.Gi(t),s=e.subscribe(n=>{window?.requestAnimationFrame(()=>{this.Wi(t,r,n)})});this.s.add(s)}}})}xs(){for(let t of this.ji)this.zi(t,this.Gi(t));this.s.empty()}Gi(t){return Wi(t)}};var li=class extends Ae{Wi(t,e,r){window.requestAnimationFrame(()=>{k(this.i,e,q(r)||ie(r)?String(r):!!r)})}zi(t,e){this.i.removeAttribute(e)}};function sr(...i){return new li(...i)}var di=class extends Ae{Wi(t,e,r){window.requestAnimationFrame(()=>{this.i.style.setProperty(this.Qi(e),q(r)||ie(r)?String(r):null)})}Qi(t){return`--vds-${t}`}zi(t,e){this.i.style.setProperty(this.Qi(e),null)}};function nr(...i){return new di(...i)}var Jr=Symbol("@vidstack/media-discovery"),se=class extends y{constructor(){super();this.controller=new Pt(this);this.__mediaFullscreen=!1;this.__mediaIsVideoView=!1;this.__mediaPlaysinline=!1;this.screenOrientationController=new mt(this);this.fullscreenController=new Re(this,this.screenOrientationController);ct(this,"vds-media-connect",{register:Jr}),L(this,"fullscreen",e=>{this.__mediaFullscreen=e}),L(this,"viewType",e=>{this.__mediaIsVideoView=e==="video"}),L(this,"playsinline",e=>{this.__mediaPlaysinline=e}),this.Ps(),this.Ls()}static get styles(){return[b`:host{display:inline-block;position:relative;contain:content}:host([hidden]){display:none}`]}get provider(){return this.controller.provider}update(e){k(this,"hide-ui",this.Ts()),super.update(e)}render(){return x`<slot></slot>`}get canFullscreen(){return this.fullscreenController.isSupported}get fullscreen(){return this.fullscreenController.isFullscreen}get fullscreenOrientation(){return this.fullscreenController.screenOrientationLock}set fullscreenOrientation(e){let r=this.fullscreenController.screenOrientationLock;r!==e&&(this.fullscreenController.screenOrientationLock=e,this.requestUpdate("fullscreen-orientation",r))}enterFullscreen(){return this.fullscreenController.enterFullscreen()}exitFullscreen(){return this.fullscreenController.exitFullscreen()}Ps(){sr(this,this.controller.store,["autoplay","autoplayError","canLoad","canPlay","canFullscreen","ended","error","fullscreen","userIdle","loop","mediaType","muted","paused","playing","playsinline","seeking","started","viewType","waiting"])}Ls(){nr(this,this.controller.store,["bufferedAmount","currentTime","duration","seekableAmount"])}Ts(){return Wt&&this.__mediaIsVideoView&&(!this.__mediaPlaysinline||this.__mediaFullscreen)}};a([_()],se.prototype,"__mediaFullscreen",2),a([_()],se.prototype,"__mediaIsVideoView",2),a([_()],se.prototype,"__mediaPlaysinline",2),a([d({attribute:"fullscreen-orientation"})],se.prototype,"fullscreenOrientation",1);m("vds-media",se);var Rt=new Set,ci=!1,ui=!1,fe=class extends y{constructor(){super();this.singlePlayback=!1;this.syncVolume=!1;this.Z=new g;Pe(this,me,(e,r)=>{this.Kt(e,r)})}static get styles(){return b`:host{display:contents}`}disconnectedCallback(){super.disconnectedCallback(),this.Z.empty()}render(){return x`<slot></slot>`}get provider(){return this.r}Kt(e,r){this.r=e,Rt.add(e);let s=this.ks();if(s&&(this.r.volume=s.volume,this.r.muted=s.muted),this.singlePlayback){let n=C(e,"vds-play",this.Rs.bind(this));this.Z.add(n)}if(this.syncVolume){let n=C(e,"vds-volume-change",de(this._s.bind(this),10,!0));this.Z.add(n)}if(this.volumeStorageKey){let n=C(e,"vds-volume-change",this.Vs.bind(this));this.Z.add(n)}r(()=>{Rt.delete(e),this.r=void 0,this.Z.empty()})}Rs(){ci||(ci=!0,Rt.forEach(e=>{e!==this.r&&(e.paused=!0)}),ci=!1)}_s(e){if(ui)return;ui=!0;let{volume:r,muted:s}=e.detail;Rt.forEach(n=>{n!==this.r&&(n.volume=r,n.muted=s)}),this.dispatchEvent(l("vds-media-volume-sync",{bubbles:!0,composed:!0,detail:e.detail})),ui=!1}ks(){if(!!this.volumeStorageKey)try{return JSON.parse(localStorage.getItem(this.volumeStorageKey))}catch{return}}Vs(e){!this.volumeStorageKey||localStorage.setItem(this.volumeStorageKey,JSON.stringify(e.detail))}};a([d({type:Boolean,attribute:"single-playback"})],fe.prototype,"singlePlayback",2),a([d({type:Boolean,attribute:"sync-volume"})],fe.prototype,"syncVolume",2),a([d({attribute:"volume-storage-key"})],fe.prototype,"volumeStorageKey",2);m("vds-media-sync",fe);var N=class extends y{constructor(){super();this.viewportEnterDelay=0;this.pageChangeType="state";this.pageEnterDelay=0;this.intersectionThreshold=1;this.Yt=!1;this.Z=new g;this.Jt=!1;this.intersectionController=new Qt(this,{root:this.intersectionRoot?document.querySelector(this.intersectionRoot):null,threshold:this.intersectionThreshold},e=>{window.clearTimeout(this.Xt);let r=e[0];this.Yt=r.isIntersecting,this.Jt&&(r.isIntersecting?this.Xt=window.setTimeout(()=>{this.Ki(this.enterViewport),this.Xt=void 0},this.viewportEnterDelay):this.exitViewport&&(this.Yt=!1,this.Yi(this.exitViewport))),this.Jt=!0,this.Ji()});this.pageController=new Ui(this,({state:e,visibility:r})=>{if(window.clearTimeout(this.Zt),!this.isIntersecting)return;(this.pageChangeType==="state"?e:r)==="hidden"?this.Yi(this.exitPage):this.enterPage&&(this.Zt=window.setTimeout(()=>{this.Ki(this.enterPage),this.Zt=void 0},this.pageEnterDelay)),this.Ji()});Pe(this,me,(e,r)=>{this.Kt(e,r)})}static get styles(){return b`:host{display:contents}`}get isIntersecting(){return this.Yt}disconnectedCallback(){super.disconnectedCallback(),this.Jt=!1,this.Z.empty()}render(){return x`<slot></slot>`}get provider(){return this.r}Kt(e,r){this.r=e;let s=this.intersectionController.observe(e);r(()=>{s(),this.r=void 0,this.Z.empty()})}Ki(e){!this.r||(e==="play"?this.r.paused=!1:e==="unmute"&&(this.r.muted=!1))}Yi(e){!this.r||(e==="pause"?this.r.paused=!0:e==="mute"&&(this.r.muted=!0))}Ji(){!this.r||this.dispatchEvent(l("vds-media-visibility-change",{bubbles:!0,composed:!0,detail:{provider:this.r,viewport:{isIntersecting:this.isIntersecting},page:{state:this.pageController.state,visibility:this.pageController.visibility}}}))}};a([d({attribute:"enter-viewport"})],N.prototype,"enterViewport",2),a([d({attribute:"exit-viewport"})],N.prototype,"exitViewport",2),a([d({type:Number,attribute:"viewport-enter-delay"})],N.prototype,"viewportEnterDelay",2),a([d({attribute:"enter-page"})],N.prototype,"enterPage",2),a([d({attribute:"exit-page"})],N.prototype,"exitPage",2),a([d({attribute:"page-change-type"})],N.prototype,"pageChangeType",2),a([d({type:Number,attribute:"page-enter-delay"})],N.prototype,"pageEnterDelay",2),a([d({attribute:"intersection-root"})],N.prototype,"intersectionRoot",2),a([d({type:Number,attribute:"intersection-threshold"})],N.prototype,"intersectionThreshold",2);m("vds-media-visibility",N);var $=class{constructor(t){t?(this.ie=t,this.Xi(t),this.Te=pt(t)):this.Te=new re}startLoading(t){this.g("vds-start-loading",{triggerEvent:t})}play(t){this.g("vds-play-request",{triggerEvent:t})}pause(t){this.g("vds-pause-request",{triggerEvent:t})}mute(t){this.g("vds-mute-request",{triggerEvent:t})}unmute(t){this.g("vds-unmute-request",{triggerEvent:t})}enterFullscreen(t,e){this.g("vds-enter-fullscreen-request",{triggerEvent:e,detail:t})}exitFullscreen(t,e){this.g("vds-exit-fullscreen-request",{triggerEvent:e,detail:t})}seeking(t,e){this.g("vds-seeking-request",{detail:t,triggerEvent:e})}seek(t,e){this.g("vds-seek-request",{detail:t,triggerEvent:e})}changeVolume(t,e){this.g("vds-volume-change-request",{detail:t,triggerEvent:e})}resumeUserIdle(t){this.g("vds-resume-user-idle-request",{triggerEvent:t})}pauseUserIdle(t){this.g("vds-pause-user-idle-request",{triggerEvent:t})}showPoster(t){this.g("vds-show-poster-request",{triggerEvent:t})}hidePoster(t){this.g("vds-hide-poster-request",{triggerEvent:t})}setTarget(t){this.ie!==t&&(this.ie=t,t?(this.Xi(t),this.Te.start()):this.Te.stop())}g(t,e){this.Te.queue(t,()=>{let r=l(t,{...e,bubbles:!0,composed:!0});this.ie?.dispatchEvent(r)})}Xi(t){}};var Xr=/\.(m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,Zr=/\.(mp4|og[gv]|webm|mov|m4v|avi)($|\?)/i;function es(i){return Xr.test(i)?"audio":Zr.test(i)?"video":"unknown"}var ve=class extends R{constructor(){super(...arguments);this.preload="metadata";this.pe=void 0;this.$e=!1;this.Be=new g;this.he=!1;this.ti=!1;this.ii=!1}get mediaElement(){return this.ei}disconnectedCallback(){this.he=!1,super.disconnectedCallback(),this.Ue()}destroy(){this.mediaElement&&(this.mediaElement.pause(),this.mediaElement.src="",this.mediaElement.innerHTML="",this.mediaElement.load()),super.destroy()}Ue(){ie(this.pe)&&window.cancelAnimationFrame(this.pe),this.pe=void 0}Ds(){!v(this.pe)||this.Zi()}Zi(){let e=this.mediaElement?.currentTime??0;this.state.currentTime!==e&&this.ve(e),this.pe=window.requestAnimationFrame(()=>{v(this.pe)||this.Zi()})}ve(e,r){this.dispatchEvent(l("vds-time-update",{detail:{currentTime:Math.min(e,this.mediaElement?.duration??0),played:this.mediaElement.played},triggerEvent:r}))}handleDefaultSlotChange(){this.er(),this.tr()}get qs(){return this.canLoad&&!D(this.mediaElement)&&!this.$e}As(){let e=ji(this)[0],r=e?.tagName??"";/^(audio|video)$/i.test(r),this.ei=e??void 0}tr(){window.requestAnimationFrame(()=>{if(this.As(),!this.qs)return;let e=this.mediaElement;e.hasAttribute("loop")&&(this.loop=!0),e.removeAttribute("loop"),e.removeAttribute("poster"),k(e,"controls",this.controls),!this.state.canFullscreen&&this.fullscreenController.isSupported&&this.dispatchEvent(l("vds-fullscreen-support-change",{detail:this.canFullscreen})),this.Dt(),this.Hs(),this.Os(),this.canLoadPoster&&this.poster.length>0&&e.getAttribute("poster")!==this.poster&&e.setAttribute("poster",this.poster),this.Ns(),this.$e=!0,this.J.add(this.er.bind(this))})}er(){this.Ue(),window.requestAnimationFrame(()=>{this.Be.empty(),this.ei=void 0}),this.$e,this.$e=!1}startLoadingMedia(){super.startLoadingMedia(),this.tr()}Ns(){if(this.state.canPlay)return;this.mediaElement.setAttribute("preload",this.preload);let e=this.mediaElement.networkState>=1;this.ti=e,this.ii=e,this.mediaElement.load(),setTimeout(()=>{this.ti=!1,this.ii=!1},0)}Hs(){let e=()=>this.mediaElement.hasAttribute("playsinline");this.Ie(e());let r=new MutationObserver(()=>this.Ie(e()));r.observe(this.mediaElement,{attributeFilter:["playsinline"]}),this.Be.add(()=>r.disconnect())}Ie(e){this.dispatchEvent(l("vds-playsinline-change",{detail:e}))}Os(){this.ce(this.ir());let e=new MutationObserver(()=>this.ce(this.ir()));e.observe(this.mediaElement,{attributeFilter:["src"],subtree:!0}),this.Be.add(()=>e.disconnect())}ce(e){let r=this.state.src;Bi(r,e)||this.dispatchEvent(l("vds-src-change",{detail:e}))}ir(){let e=[this.mediaElement?.src,...Array.from(this.mediaElement?.querySelectorAll("source")??[]).map(r=>r.src)].filter(Boolean);return Array.from(new Set(e))}rr(){return{src:this.state.src,currentSrc:this.mediaElement.currentSrc,duration:this.mediaElement.duration||0,poster:this.mediaElement.poster,mediaType:this.je(),viewType:this.state.viewType}}Dt(){if(D(this.mediaElement))return;let e={abort:this.Ge,canplay:this.Pe,canplaythrough:this.Nt,durationchange:this.zt,emptied:this.Fs,ended:this.Wt,error:this.Le,loadeddata:this.Ot,loadedmetadata:this.xe,loadstart:this.Ht,pause:this.Ut,play:this.Ft,playing:this.It,progress:this.Qt,ratechange:this.Is,seeked:this.jt,seeking:this.Bt,stalled:this.Us,suspend:this.$s,volumechange:this.$t,waiting:this.Gt};z(e).forEach(r=>{let s=e[r].bind(this),n=C(this.mediaElement,r,async o=>{await s(o)});this.Be.add(n)})}Ge(e){this.ti||(this.dispatchEvent(l("vds-abort",{triggerEvent:e})),this.Ae("",e))}Pe(e){this.Vi({event:e,duration:this.mediaElement.duration})}Nt(e){this.state.started||this.dispatchEvent(l("vds-can-play-through",{triggerEvent:e,detail:{duration:this.mediaElement.duration}}))}Ht(e){if(this.Ae(this.mediaElement.currentSrc,e),this.mediaElement.currentSrc===""){this.Ge();return}this.dispatchEvent(l("vds-load-start",{triggerEvent:e,detail:this.rr()}))}Fs(e){this.ii||this.dispatchEvent(l("vds-emptied",{triggerEvent:e}))}Ot(e){this.dispatchEvent(l("vds-loaded-data",{triggerEvent:e}))}xe(e){this.dispatchEvent(l("vds-volume-change",{detail:{volume:this.mediaElement.volume,muted:this.mediaElement.muted}})),this.dispatchEvent(l("vds-loaded-metadata",{triggerEvent:e,detail:this.rr()}))}Zn(e){this.dispatchEvent(l("vds-media-type-change",{detail:this.je(),triggerEvent:e}))}Ft(e){let r=l("vds-play",{triggerEvent:e});r.autoplay=this.He,this.dispatchEvent(r)}Ut(e){this.mediaElement.readyState===1&&!this.he||(this.he=!1,this.Ue(),this.dispatchEvent(l("vds-pause",{triggerEvent:e})))}It(e){this.he=!1;let r=l("vds-playing",{triggerEvent:e});this.dispatchEvent(r),this.Ds()}zt(e){this.mediaElement.ended&&this.ve(this.mediaElement.duration,e),this.dispatchEvent(l("vds-duration-change",{detail:this.mediaElement.duration,triggerEvent:e}))}Qt(e){this.dispatchEvent(l("vds-progress",{triggerEvent:e,detail:{buffered:this.mediaElement.buffered,seekable:this.mediaElement.seekable}}))}Is(e){throw Error("Not implemented")}Bt(e){this.dispatchEvent(l("vds-seeking",{detail:this.mediaElement.currentTime,triggerEvent:e}))}jt(e){let r=l("vds-seeked",{detail:this.mediaElement.currentTime,triggerEvent:e});this.dispatchEvent(r);let s=this.mediaElement.currentTime;if(Math.trunc(s)===Math.trunc(this.mediaElement.duration)&&je(this.mediaElement.duration)>je(s)&&(this.ve(this.mediaElement.duration,e),!this.mediaElement.ended))try{this.play()}catch{}}Us(e){this.dispatchEvent(l("vds-stalled",{triggerEvent:e})),this.mediaElement.readyState<3&&(this.he=!0,this.dispatchEvent(l("vds-waiting",{triggerEvent:e})))}$t(e){this.dispatchEvent(l("vds-volume-change",{detail:{volume:this.mediaElement.volume,muted:this.mediaElement.muted},triggerEvent:e}))}Gt(e){this.mediaElement.readyState<3&&(this.he=!0,this.dispatchEvent(l("vds-waiting",{triggerEvent:e})))}$s(e){let r=l("vds-suspend",{triggerEvent:e});this.dispatchEvent(r)}Wt(e){this.Ue(),this.ve(this.mediaElement.duration,e);let r=l("vds-end",{triggerEvent:e});this.dispatchEvent(r),this.state.loop?this.Bs():this.dispatchEvent(l("vds-ended",{triggerEvent:e}))}Bs(){D(this.controls)&&(this.mediaElement.controls=!1),this.dispatchEvent(l("vds-loop-request"))}Le(e){let r=this.mediaElement.error;!r||this.dispatchEvent(l("vds-error",{detail:{message:r.message,code:r.code,mediaError:r},triggerEvent:e}))}es(){return this.mediaElement?.paused??!0}Xr(){return this.mediaElement?.volume??1}Zr(e){this.mediaElement.volume=e}ts(){return this.mediaElement?.currentTime??0}_i(e){this.mediaElement.currentTime!==e&&(this.mediaElement.currentTime=e)}is(){return this.mediaElement?.muted??!1}rs(e){this.mediaElement.muted=e}async play(){try{return this.ss(),await this.ns(),this.mediaElement?.play()}catch(e){let r=l("vds-play-fail");throw r.autoplay=this.He,r.error=e,e}}async pause(){return this.mediaElement?.pause()}je(){return es(this.state.currentSrc)}};a([d()],ve.prototype,"preload",2);var Dt=class extends ve{static get styles(){return[b`:host{display:inline-block}:host([hidden]){display:none}`]}connectedCallback(){super.connectedCallback(),this.dispatchEvent(l("vds-view-type-change",{detail:"audio"}))}};m("vds-audio",Dt);var At=class extends Re{constructor(e,r,s){super(e,r);this.We=s}get isFullscreen(){return this.isSupportedNatively?this.isNativeFullscreen:this.We.isFullscreenMode}get isSupported(){return this.isSupportedNatively||this.isSupportedOnSafari}get isSupportedOnSafari(){return this.We.isSupported}async Et(){return this.isSupportedNatively?super.Et():this.js()}async js(){return this.We.setPresentationMode("fullscreen")}async bt(){return this.isSupportedNatively?super.bt():this.Gs()}async Gs(){return this.We.setPresentationMode("inline")}ft(e){return this.isSupportedNatively?super.ft(e):this.isSupportedOnSafari?C(this.i,"vds-video-presentation-change",this.ri.bind(this)):H}ri(e){this.yt(e)}gt(e){return this.isSupportedNatively?super.gt(e):H}};var Vt=class{constructor(t){this.i=t;this.z=void 0;this.b=new g;let e=t.firstUpdated;t.firstUpdated=r=>{e?.call(t,r),this.b.add(this.Ws())},t.addController({hostDisconnected:this.Ee.bind(this)})}Ee(){this.setPresentationMode("inline"),this.b.empty()}get presentationMode(){return this.i.videoElement?.webkitPresentationMode}get isInlineMode(){return this.presentationMode==="inline"}get isPictureInPictureMode(){return this.presentationMode==="inline"}get isFullscreenMode(){return this.presentationMode==="fullscreen"}get isSupported(){return j(this.i.videoElement?.webkitSetPresentationMode)}setPresentationMode(t){this.i.videoElement?.webkitSetPresentationMode?.(t)}Ws(){return!this.isSupported||D(this.i.videoElement)?H:C(this.i.videoElement,"webkitpresentationmodechanged",this.ri.bind(this))}ri(t){Ue(this.i,t),this.i.dispatchEvent(l("vds-video-presentation-change",{detail:this.presentationMode,triggerEvent:t}))}};var Ve=class extends ve{constructor(){super(...arguments);this.presentationController=new Vt(this);this.fullscreenController=new At(this,this.screenOrientationController,this.presentationController)}static get styles(){return[b`:host{display:inline-block;background-color:var(--vds-video-bg-color,#000)}:host([hidden]){display:none}::slotted(video:not([width])){width:var(--vds-video-width,100%)}::slotted(video:not([height])){height:var(--vds-video-height,auto)}`]}connectedCallback(){super.connectedCallback(),this.dispatchEvent(l("vds-view-type-change",{detail:"video"}))}get videoElement(){return this.mediaElement}};var ge=new Map;function ar(i){return ge.has(i)}async function lr(i,t={}){if(v(i))return;if(t.onLoadStart?.(),!j(i))return t.onLoaded?.(i),i;let e=String(i);if(ge.has(e)){let r=ge.get(e);return t.onLoaded?.(r),r}try{let r=(await i())?.default;if(r&&!!r.isSupported)t.onLoaded?.(r),ge.set(e,r);else throw Error("");return r}catch(r){t.onLoadError?.(r)}}async function dr(i,t={}){if(!!q(i)){if(ge.has(i))return ge.get(i);t.onLoadStart?.();try{if(await Jt.load(i),!j(window.Hls))throw Error("");let e=window.Hls;return t.onLoaded?.(e),ge.set(i,e),e}catch(e){t.onLoadError?.(e)}}}function hi(i){return zi(i.replace("vds-",""))}var or="vds-hls-",ts=["lib-load","instance","unsupported"];function pi(i){return i.startsWith(or)&&!ts.some(t=>i.startsWith(`${or}${t}`))}var cr=/\.(m3u8)($|\?)/i;var ur="https://cdn.jsdelivr.net/npm/hls.js@^1.0.0/dist/hls.light",ba=`${ur}.js`,is=`${ur}.min.js`,He=class extends Ve{constructor(){super();this.Qe=!1;this.hlsConfig={};this.hlsLibrary=is;this.K="";this.ke=[];Object.defineProperty(this,"hls-config",{set:e=>{this.hlsConfig=e}}),Object.defineProperty(this,"hls-library",{set:e=>{this.hlsLibrary=e}})}get Hls(){return this.Ke}get hlsEngine(){return this.ze}get isHlsEngineAttached(){return this.Qe}get currentHlsSrc(){return this.K}async update(e){super.update(e),e.has("hlsLibrary")&&zt()&&this.zs()}destroy(){this.si(),super.destroy()}get isHlsSupported(){return this.Hls?.isSupported()??zt()}get isHlsStream(){return this.state.src.some(e=>cr.test(e))}zs(){this.canLoad||!q(this.hlsLibrary)||ar(this.hlsLibrary)||yt(this.hlsLibrary)}async Qs(e=!1){if(D(this.videoElement)&&!e&&!v(this.hlsEngine)){this.z?.infoGroup("\u{1F3D7}\uFE0F Could not build HLS engine").labelledLog("Video Element",this.videoElement).labelledLog("HLS Engine",this.hlsEngine).labelledLog("Force Rebuild Flag",e).dispatch();return}v(this.hlsEngine)||this.si();let r={onLoadStart:()=>{this.dispatchEvent(l("vds-hls-lib-load-start"))},onLoaded:s=>{this.dispatchEvent(l("vds-hls-lib-loaded",{detail:s}))},onLoadError:s=>{this.dispatchEvent(l("vds-hls-lib-load-error",{detail:s})),this.dispatchEvent(l("vds-error",{detail:{message:s.message,code:4}}))}};if(this.Ke=await dr(this.hlsLibrary,r),v(this.Ke)&&!q(this.hlsLibrary)&&(this.Ke=await lr(this.hlsLibrary,r)),!!this.Hls){if(!this.Hls?.isSupported?.()){let s="[vds]: `hls.js` is not supported in this environment";this.dispatchEvent(l("vds-hls-unsupported")),this.dispatchEvent(l("vds-error",{detail:{message:s,code:4}}));return}this.ze=new this.Hls(this.hlsConfig),this.dispatchEvent(l("vds-hls-instance",{detail:this.hlsEngine})),this.Ks()}}Ys(){this.isHlsEngineAttached||v(this.hlsEngine)||D(this.videoElement)||(this.hlsEngine.attachMedia(this.videoElement),this.Qe=!0)}Js(){!this.isHlsEngineAttached||(this.hlsEngine?.detachMedia(),this.Qe=!1,this.K="")}Xs(e){D(this.hlsEngine)||!this.isHlsStream||e===this.K||(this.hlsEngine.loadSource(e),this.K=e)}je(){return this.state.mediaType==="live-video"?"live-video":this.isHlsStream?"video":super.je()}si(){this.ze?.destroy(),this.K="",this.ze=void 0,this.Qe=!1}ce(e){this.K.length>0&&!e.includes(this.K)&&e.push(this.K),super.ce(e)}Ge(e){if(this.isHlsSupported){for(let r of this.state.src)if(cr.test(r)){this.Zs(r);return}}super.Ge(e)}async Zs(e){if(this.K!==e&&!(!this.hasUpdated||!this.canLoad)){if(!this.isHlsStream){this.Js();return}D(this.hlsLibrary)||(v(this.hlsEngine)&&await this.Qs(),this.Ys(),this.Xs(e))}}xe(e){super.xe(e),this.Vi({event:e,duration:this.mediaElement.duration})}Ks(){v(this.hlsEngine)||v(this.Hls)||(this.hlsEngine.on(this.Hls.Events.LEVEL_LOADED,this.en.bind(this)),this.ke.forEach(({type:e,listener:r,options:s})=>{this.hlsEngine?.[s?.once?"once":"on"](e,r,s?.context)}),this.hlsEngine.on(this.Hls.Events.ERROR,this.tn.bind(this)))}tn(e,r){if(!v(this.Hls)&&r.fatal)switch(r.type){case"networkError":this.rn();break;case"mediaError":this.sn();break;default:this.nn();break}}rn(){this.hlsEngine?.startLoad()}sn(){this.hlsEngine?.recoverMediaError()}nn(){this.si()}en(e,r){this.state.canPlay||this.an(e,r)}an(e,r){let{live:s,totalduration:n}=r.details,o=new dt(e,{detail:r}),u=s?"live-video":"video";this.state.mediaType!==u&&this.dispatchEvent(l("vds-media-type-change",{detail:u,triggerEvent:o})),this.state.duration!==n&&this.dispatchEvent(l("vds-duration-change",{detail:n,triggerEvent:o}))}addEventListener(e,r,s){if(pi(e)){let n=hi(e);this.ke.some(u=>u.type===n&&u.listener===r)||(this.ke.push({type:n,listener:r,options:s}),this.hlsEngine?.[s?.once?"once":"on"](n,r,s?.context));return}return super.addEventListener(e,r,s)}removeEventListener(e,r,s){if(pi(e)){let n=hi(e);this.ke=this.ke.filter(o=>o.type===n&&o.listener===r),this.hlsEngine?.off(n,r,s?.context,s?.once);return}return super.removeEventListener(e,r,s)}};a([d({type:Object,attribute:"hls-config"})],He.prototype,"hlsConfig",2),a([d({attribute:"hls-library"})],He.prototype,"hlsLibrary",2);m("vds-hls",He);m("vds-video",Ve);var Ke={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Ye=i=>(...t)=>({nt:i,values:t}),ye=class{constructor(t){}get E(){return this.d.E}ot(t,e,r){this.Ye=t,this.d=e,this.dn=r}Lr(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};var hr=Ye(class extends ye{constructor(i){var t;if(super(i),i.type!==Ke.ATTRIBUTE||i.name!=="style"||((t=i.strings)===null||t===void 0?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(i){return Object.keys(i).reduce((t,e)=>{let r=i[e];return r==null?t:t+`${e=e.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(i,[t]){let{style:e}=i.element;if(this.vt===void 0){this.vt=new Set;for(let r in t)this.vt.add(r);return this.render(t)}this.vt.forEach(r=>{t[r]==null&&(this.vt.delete(r),r.includes("-")?e.removeProperty(r):e[r]="")});for(let r in t){let s=t[r];s!=null&&(this.vt.add(r),r.includes("-")?e.setProperty(r,s):e[r]=s)}return Y}});var pr=b`:host{display:block}:host([hidden]){display:none}.container{position:relative;width:100%;height:0;padding-bottom:min(max(var(--vds-aspect-ratio-min-height),var(--vds-aspect-ratio-percent)),var(--vds-aspect-ratio-max-height))}slot{display:block;position:absolute;top:0;left:0;width:100%;height:100%}::slotted(*){--vds-video-width:100%;--vds-video-height:100%;width:100%;height:100%}`;var be=class extends y{constructor(){super(...arguments);this.minHeight="150px";this.maxHeight="100vh";this.ratio="2/1"}static get styles(){return[pr]}get isValidRatio(){return q(this.ratio)?/\d{1,2}\s*?(?:\/|:)\s*?\d{1,2}/.test(this.ratio):!1}render(){return x`<div class="container" style="${hr({"--vds-aspect-ratio-percent":this.ln(),"--vds-aspect-ratio-min-height":this.minHeight??"150px","--vds-aspect-ratio-max-height":this.maxHeight??"100vh"})}"><slot></slot></div>`}ln(){if(this.isValidRatio){let[e,r]=this.un();return`${r/e*100}%`}return"50%"}un(){return this.ratio.split(/\s*?(?:\/|:)\s*?/).map(Number)}};a([d({attribute:"min-height"})],be.prototype,"minHeight",2),a([d({attribute:"max-height"})],be.prototype,"maxHeight",2),a([d()],be.prototype,"ratio",2);m("vds-aspect-ratio",be);var fi=new Map,X=class extends y{constructor(){super();this.sr=!1;this.s=new g;this.repeat=0;this.priority=10;this.whileIdle=!1;this.or=0;this.Xe=!1;this.ni=pe.consume(this);Kt(this,Lt,e=>{this.ee=e}),L(this,"userIdle",de(e=>{this.sr=e},300))}static get styles(){return[b`:host{display:block;contain:content;z-index:0;opacity:0;visibility:hidden;pointer-events:none!important}:host([hidden]){display:none}`]}get Je(){return this.ee?fi.get(this.ee):void 0}get nr(){return this.Je?.get(this)}connectedCallback(){super.connectedCallback(),window.requestAnimationFrame(()=>{this.ee&&fi.set(this.ee,new Map)})}willUpdate(e){this.cn(),this.hn(),this.pn(),super.willUpdate(e)}disconnectedCallback(){this.s.empty(),this.nr?.[1].resolve(),this.Je?.delete(this),super.disconnectedCallback()}performAction(e){if(!this.action)return;let r,s=this.action;this.action.startsWith("toggle:")&&(s=this.vn()),this.action.startsWith("seek:")&&(s="seek",r=this.or+Number(this.action.split(":")[1])),this.dispatchEvent(l(`vds-${s}-request`,{bubbles:!0,composed:!0,detail:r,triggerEvent:e}))}cn(){if(this.s.empty(),!this.ee||!this.type||!this.action)return;let e=0,r,s=(o=!1)=>{e+=1,window.clearTimeout(r),r=window.setTimeout(()=>{let u=this.nr?.[1];o&&this.Je?.delete(this),rs(this.ee),e=0,u?.resolve()},200)},n=C(this.ee,this.type,o=>{!this.mn(o)||(o.preventDefault(),e==0&&this.Je?.set(this,[o,$e()]),s(e<this.repeat))});this.s.add(n)}mn(e){if(!this.whileIdle&&this.sr)return!1;if(Ni(e)||Fi(e)||jt(e)){let r=jt(e)?e.touches[0]:void 0,s=r?.clientX??e.clientX,n=r?.clientY??e.clientY,o=this.getBoundingClientRect(),u=n>=o.top&&n<=o.bottom&&s>=o.left&&s<=o.right;return e.type.includes("leave")?!u:u}return!0}pn(){if(!this.action?.startsWith("seek"))return;let e=this.q.currentTime.subscribe(r=>{this.or=r});this.s.add(e)}get q(){return this.ni.value}vn(){switch(this.action?.split(":")[1]){case"paused":return this.Xe?"play":"pause";case"muted":return this.Xe?"unmute":"mute";case"fullscreen":return`${this.Xe?"exit":"enter"}-fullscreen`;default:return""}}hn(){if(!this.action?.startsWith("toggle:"))return;let e=this.action.split(":")[1],r=this.q[e]?.subscribe(s=>{this.Xe=s});r&&this.s.add(r)}};a([d()],X.prototype,"type",2),a([d({type:Number})],X.prototype,"repeat",2),a([d({type:Number})],X.prototype,"priority",2),a([d()],X.prototype,"action",2),a([d({type:Boolean,attribute:"while-idle"})],X.prototype,"whileIdle",2);var mi=new WeakSet;async function rs(i){if(mi.has(i))return;let t=fi.get(i);if(!t)return;mi.add(i);let e=Array.from(t.values()).map(n=>n[1].promise);await Promise.all(e);let r=Array.from(t.keys()),s=Math.min(...r.map(n=>n.priority));r.filter(n=>n.priority<=s).map(n=>{let o=t.get(n)[0];n.performAction(o)}),t.clear(),mi.delete(i)}m("vds-gesture",X);var mr=new Set,Ee=class extends y{constructor(){super();this.__canLoad=!1;this.dr=new $(this);L(this,"poster",e=>{window.requestAnimationFrame(()=>{!this.__canLoad&&!mr.has(e)&&(yt(e,"prefetch"),mr.add(e))}),this.__src=e}),L(this,"canLoad",e=>{this.ar(e),this.__canLoad=e})}static get styles(){return[b`:host{display:block;contain:content;pointer-events:none;object-fit:cover;box-sizing:border-box}:host([hidden]){display:none}img{display:block;width:100%;height:100%;pointer-events:none;object-fit:inherit;object-position:inherit;user-select:none;-webkit-user-select:none;box-sizing:border-box}`]}get src(){return this.__src}connectedCallback(){super.connectedCallback(),this.dr.hidePoster()}disconnectedCallback(){this.dr.showPoster(),super.disconnectedCallback(),this.ar(!1)}render(){return x`<img part="img" src="${_e(this.__canLoad?this.src:null)}" alt="${_e(this.alt)}" @load="${this.fn}" @error="${this.gn}">`}yn(){this.removeAttribute("img-error"),this.removeAttribute("img-loaded"),this.src&&this.src.length>0&&this.setAttribute("img-loading","")}fn(){this.removeAttribute("img-loading"),this.setAttribute("img-loaded","")}gn(){this.removeAttribute("img-loading"),this.setAttribute("img-error","")}ar(e){e?this.yn():(this.removeAttribute("img-error"),this.removeAttribute("img-loaded"),this.removeAttribute("img-loading"))}};a([_()],Ee.prototype,"__src",2),a([_()],Ee.prototype,"__canLoad",2),a([d()],Ee.prototype,"alt",2);m("vds-poster",Ee);var fr=b`:host{display:table;contain:content;user-select:none;cursor:pointer;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}:host([hidden]){display:none}:host(:focus){outline:0}:host(:focus-visible){outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}:host(.focus-visible){outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}`;var U=class extends y{constructor(){super();this.pressed=!1;this.disabled=!1;this.eo=p(this,"click",e=>{this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())},{capture:!0});ht(this),["pointerup","keydown"].forEach(e=>{p(this,e,r=>{this.disabled||We(r)&&!Gi(r)||this.Ze(r)})})}static get styles(){return[fr]}static get parts(){return[]}connectedCallback(){super.connectedCallback(),P(this,"tabindex","0"),P(this,"role","button"),this.lr()}updated(e){e.has("pressed")&&this.lr()}lr(){k(this,"aria-pressed",this.pressed?"true":"false")}render(){return this.oi()}oi(){return x`<slot></slot>`}Ze(e){this.pressed=!this.pressed}};a([d({type:Boolean})],U.prototype,"pressed",2),a([d({type:Boolean,reflect:!0})],U.prototype,"disabled",2);m("vds-toggle-button",U);var Ht=class extends U{constructor(){super();this.c=new $(this);this.ur=1;this.cr=!1;L(this,"volume",e=>{this.ur=e,this.hr()}),L(this,"muted",e=>{this.cr=e,this.hr()})}connectedCallback(){super.connectedCallback(),P(this,"aria-label","Mute")}hr(){let e=this.cr||this.ur===0;this.pressed=e,k(this,"muted",e)}Ze(e){this.disabled||(this.pressed?this.c.unmute(e):this.c.mute(e))}};m("vds-mute-button",Ht);var Ot=class extends U{constructor(){super();this.c=new $(this);L(this,"paused",e=>{this.pressed=!e,k(this,"paused",e)})}connectedCallback(){super.connectedCallback(),P(this,"aria-label","Play")}Ze(e){this.disabled||(this.pressed?this.c.pause(e):this.c.play(e))}};m("vds-play-button",Ot);var Je=class extends U{constructor(){super();this.c=new $(this);L(this,"fullscreen",e=>{this.pressed=e,k(this,"fullscreen",e)}),L(this,"canFullscreen",e=>{k(this,"hidden",!e)})}connectedCallback(){super.connectedCallback(),P(this,"aria-label","Fullscreen")}Ze(e){this.disabled||(this.pressed?this.c.exitFullscreen(this.target,e):this.c.enterFullscreen(this.target,e))}};a([d({attribute:"target"})],Je.prototype,"target",2);m("vds-fullscreen-button",Je);function ss(){let i=I(!1),t=I(!1);return{value:I(50),pointerValue:I(0),min:I(0),max:I(100),dragging:i,pointing:t,interactive:De([i,t],([e,r])=>e||r)}}var Oe=ke(ss);var vr=b`*{box-sizing:border-box;touch-action:none}:host{display:block;contain:layout;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}:host([hidden]){display:none}:host(:focus){outline:0}:host(:focus-visible){outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}:host(.focus-visible){outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}`;var vi=(c=>(c[c.Left=-1]="Left",c[c.ArrowLeft=-1]="ArrowLeft",c[c.Up=-1]="Up",c[c.ArrowUp=-1]="ArrowUp",c[c.Right=1]="Right",c[c.ArrowRight=1]="ArrowRight",c[c.Down=1]="Down",c[c.ArrowDown=1]="ArrowDown",c))(vi||{}),A=class extends y{constructor(){super();this.En=Oe.provide(this);this.disabled=!1;this.value=50;this.ai=1;this.pr=1;this.shiftKeyMultiplier=5;this.customValueText=!1;this.c=new $(this);this.J=new g;this.to=p(this,"pointerenter",()=>{this.disabled||(this.setAttribute("pointing",""),this.store.pointing.set(!0))});this.io=p(this,"pointermove",e=>{if(this.disabled||this.isDragging)return;let r=this.tt(e);this.store.pointerValue.set(r),this.it(e)});this.ro=p(this,"pointerleave",()=>{this.disabled||(this.removeAttribute("pointing"),this.store.pointing.set(!1))});this.so=p(this,"pointerdown",e=>{this.disabled||(this.Cn(e),this.li(e))});this.no=p(this,"keydown",e=>{if(this.disabled)return;let{key:r,shiftKey:s}=e;if(!Object.keys(vi).includes(r))return;let o=s?this.keyboardStep*this.shiftKeyMultiplier:this.keyboardStep,u=Number(vi[r]),c=o*u,h=(this.value+c)/this.step,E=this.step*h;this.value=this.mr(E),this.et(e)});this.oo=p(this,"vds-slider-value-change",this.di.bind(this));this.ao=p(this,"vds-slider-pointer-value-change",this.vr.bind(this));this.li=Et(e=>{if(this.disabled||!this.isDragging)return;let r=this.tt(e);this.store.pointerValue.set(r),this.it(e)});this.lo=p(this,"pointerup",e=>{this.disabled||!this.isDragging||this.Mn(e)},{target:document});this.uo=p(this,"touchmove",e=>{this.disabled||!this.isDragging||e.preventDefault()},{target:document,passive:!1});this.co=p(this,"pointermove",e=>{this.disabled||!this.isDragging||this.li(e)},{target:document});this.Er=this.value;this.et=Et(e=>{this.value!==this.Er&&(this.dispatchEvent(l("vds-slider-value-change",{detail:this.value,triggerEvent:e})),this.Er=this.value)});this.br=this.pointerValue;this.it=Et(e=>{if(this.pointerValue===this.br)return;["vds-slider-pointer-value-change",this.isDragging&&"vds-slider-drag-value-change"].forEach(s=>{s&&this.dispatchEvent(l(s,{detail:this.pointerValue,triggerEvent:e}))}),this.br=this.pointerValue});ht(this)}static get styles(){return[vr]}static get parts(){return[]}get store(){return this.En.value}get min(){return te(this.store.min)}set min(e){this.store.min.set(e)}get max(){return te(this.store.max)}set max(e){this.store.max.set(e)}get step(){return this.ai}set step(e){this.ai=e}get keyboardStep(){return this.pr}set keyboardStep(e){this.pr=e}get isDragging(){return te(this.store.dragging)}get fillRate(){let e=this.max-this.min,r=this.value-this.min;return e>0?r/e:0}get fillPercent(){return this.fillRate*100}get pointerValue(){return te(this.store.pointerValue)}get pointerRate(){let e=this.max-this.min,r=this.pointerValue-this.min;return e>0?r/e:0}get pointerPercent(){return this.pointerRate*100}connectedCallback(){super.connectedCallback(),this.bn(),this.di(),this.vr(),this.J.add(this.store.interactive.subscribe(e=>{k(this,"interactive",e)}))}willUpdate(e){(e.has("value")||e.has("min")||e.has("max"))&&(this.value=this.mr(this.value),this.store.value.set(this.value),this.di(),this.et()),e.has("disabled")&&this.disabled&&(this.store.dragging.set(!1),this.store.pointing.set(!1),this.removeAttribute("dragging"),this.removeAttribute("pointing"),this.removeAttribute("interactive"),k(this,"aria-disabled",this.disabled)),this.customValueText||this.wn(),super.willUpdate(e)}disconnectedCallback(){this.li.cancel(),this.J.empty(),super.disconnectedCallback()}di(){he(this,"fill-value",`${this.value}`),he(this,"fill-rate",`${this.fillRate}`),he(this,"fill-percent",`${this.fillPercent}%`)}vr(){he(this,"pointer-value",`${this.pointerValue}`),he(this,"pointer-rate",`${this.pointerRate}`),he(this,"pointer-percent",`${this.pointerPercent}%`)}render(){return this.Sn()}Sn(){return x`${this.oi()}`}oi(){return x`<slot></slot>`}bn(){P(this,"role","slider"),P(this,"tabindex","0"),P(this,"aria-orientation","horizontal"),P(this,"autocomplete","off")}wn(){this.setAttribute("aria-valuemin",this.fr()),this.setAttribute("aria-valuenow",this.gr()),this.setAttribute("aria-valuemax",this.yr()),this.setAttribute("aria-valuetext",this.st())}fr(){return String(this.min)}gr(){return String(this.value)}yr(){return String(this.max)}st(){return`${ue(this.value/this.max*100,2)}%`}Cn(e){if(this.isDragging)return;this.store.dragging.set(!0),this.setAttribute("dragging","");let r=this.tt(e);this.store.pointerValue.set(r),this.it(e),this.dispatchEvent(l("vds-slider-drag-start",{triggerEvent:e,detail:this.value})),this.c.pauseUserIdle(e)}Mn(e){if(!this.isDragging)return;this.store.dragging.set(!1),this.et.cancel(),this.removeAttribute("dragging");let r=this.tt(e);this.value=r,this.store.pointerValue.set(r),this.et(e),this.it(e),this.dispatchEvent(l("vds-slider-drag-end",{triggerEvent:e,detail:this.value})),this.c.resumeUserIdle(e)}mr(e){return Be(this.min,ue(e,je(this.step)),this.max)}xn(e){let r=Be(0,e,1),n=(this.max-this.min)*r,o=Math.round(n/this.step),u=this.step*o;return this.min+u}tt(e){let r=e.clientX,{left:s,width:n}=this.getBoundingClientRect(),o=(r-s)/n;return this.xn(o)}};a([d({type:Number})],A.prototype,"min",1),a([d({type:Number})],A.prototype,"max",1),a([d({reflect:!0,type:Boolean})],A.prototype,"disabled",2),a([d({type:Number})],A.prototype,"value",2),a([d({type:Number})],A.prototype,"step",1),a([d({attribute:"keyboard-step",type:Number})],A.prototype,"keyboardStep",1),a([d({attribute:"shift-key-multiplier",type:Number})],A.prototype,"shiftKeyMultiplier",2),a([d({type:Boolean,attribute:"custom-value-text"})],A.prototype,"customValueText",2);m("vds-slider",A);var Q=class extends y{constructor(){super(...arguments);this.s=new g;this.Pn=Oe.consume(this);this.__value=0;this.type="current";this.showHours=!1;this.padHours=!1;this.decimalPlaces=2}static get styles(){return[b`:host{display:inline-block;contain:content}:host([hidden]){display:none}`]}get ui(){return this.Pn.value}connectedCallback(){super.connectedCallback(),this.Re()}update(e){(e.has("type")||e.has("format"))&&this.Re(),super.update(e)}disconnectedCallback(){this.s.empty(),super.disconnectedCallback()}render(){return x`${this.st()}`}Re(){this.s.empty();let e=this.ui[this.type==="current"?"value":"pointerValue"],s=(this.format==="percent"?this.Ln(e):e).subscribe(n=>{this.__value=n});this.s.add(s)}Ln(e){return De([e,this.ui.min,this.ui.max],([r,s,n])=>{let o=n-s;return r/o*100})}st(){switch(this.format){case"percent":return this.Tn();case"time":return this.kn();default:return`${this.__value}`}}Tn(){return`${ue(this.__value,this.decimalPlaces)}%`}kn(){return bt(this.__value,this.padHours,this.showHours)}};a([_()],Q.prototype,"__value",2),a([d()],Q.prototype,"type",2),a([d()],Q.prototype,"format",2),a([d({attribute:"show-hours",type:Boolean})],Q.prototype,"showHours",2),a([d({attribute:"pad-hours",type:Boolean})],Q.prototype,"padHours",2),a([d({attribute:"decimal-places",type:Number})],Q.prototype,"decimalPlaces",2);var{H:td}=Di;var gr=i=>i.strings===void 0;var Xe=(i,t)=>{var e,r;let s=i.x;if(s===void 0)return!1;for(let n of s)(r=(e=n).pi)===null||r===void 0||r.call(e,t,!1),Xe(n,t);return!0},Nt=i=>{let t,e;do{if((t=i.d)===void 0)break;e=t.x,e.delete(i),i=t}while(e?.size===0)},yr=i=>{for(let t;t=i.d;i=t){let e=t.x;if(e===void 0)t.x=e=new Set;else if(e.has(i))break;e.add(i),as(t)}};function ns(i){this.x!==void 0?(Nt(this),this.d=i,yr(this)):this.d=i}function os(i,t=!1,e=0){let r=this.n,s=this.x;if(s!==void 0&&s.size!==0)if(t)if(Array.isArray(r))for(let n=e;n<r.length;n++)Xe(r[n],!1),Nt(r[n]);else r!=null&&(Xe(r,!1),Nt(r));else Xe(this,i)}var as=i=>{var t,e,r,s;i.type==Ke.CHILD&&((t=(r=i).oe)!==null&&t!==void 0||(r.oe=os),(e=(s=i).wr)!==null&&e!==void 0||(s.wr=ns))},Ft=class extends ye{constructor(){super(...arguments),this.x=void 0}ot(t,e,r){super.ot(t,e,r),yr(this),this.isConnected=t.E}pi(t,e=!0){var r,s;t!==this.isConnected&&(this.isConnected=t,t?(r=this.reconnected)===null||r===void 0||r.call(this):(s=this.disconnected)===null||s===void 0||s.call(this)),e&&(Xe(this,t),Nt(this))}setValue(t){if(gr(this.Ye))this.Ye.w(t,this);else{let e=[...this.Ye.n];e[this.dn]=t,this.Ye.w(e,this,0)}}disconnected(){}reconnected(){}};var br=()=>new yi,yi=class{},gi=new WeakMap,Er=Ye(class extends Ft{render(i){return S}update(i,[t]){var e;let r=t!==this.Y;return r&&this.Y!==void 0&&this.rt(void 0),(r||this.lt!==this.dt)&&(this.Y=t,this.ct=(e=i.options)===null||e===void 0?void 0:e.host,this.rt(this.dt=i.element)),S}rt(i){var t;if(typeof this.Y=="function"){let e=(t=this.ct)!==null&&t!==void 0?t:globalThis,r=gi.get(e);r===void 0&&(r=new WeakMap,gi.set(e,r)),r.get(this.Y)!==void 0&&this.Y.call(this.ct,void 0),r.set(this.Y,i),i!==void 0&&this.Y.call(this.ct,i)}else this.Y.value=i}get lt(){var i,t,e;return typeof this.Y=="function"?(t=gi.get((i=this.ct)!==null&&i!==void 0?i:globalThis))===null||t===void 0?void 0:t.get(this.Y):(e=this.Y)===null||e===void 0?void 0:e.value}disconnected(){this.lt===this.dt&&this.rt(void 0)}reconnected(){this.rt(this.dt)}});var we=class extends y{constructor(){super();this.Cr=br();this.__canPlay=!1;this.__hasError=!1;ft(this,Oe,"pointerValue",e=>{this.ve(e)})}static get styles(){return[b`:host{display:inline-block;contain:content}:host([hidden]){display:none}video{display:block;width:100%;height:auto}`]}get videoElement(){return this.Cr.value}ve(e){!this.__hasError&&this.__canPlay&&this.videoElement.currentTime!==e&&(this.videoElement.currentTime=e)}willUpdate(e){e.has("src")&&(this.__canPlay=!1,this.__hasError=!1,this.removeAttribute("video-can-play"),this.removeAttribute("video-error")),super.willUpdate(e)}render(){return this.Rn()}Rn(){return x`<video part="video" muted playsinline preload="auto" src="${qi(this.src)}" @canplay="${this.Pe}" @error="${this.Le}" ${Er(this.Cr)}></video>`}async Pe(e){this.__canPlay=!0,this.setAttribute("video-can-play",""),Ue(this,e)}Le(e){this.__hasError=!0,this.setAttribute("video-error",""),Ue(this,e)}};a([d()],we.prototype,"src",2),a([_()],we.prototype,"__canPlay",2),a([_()],we.prototype,"__hasError",2);var wr=b``;var B=class extends A{constructor(){super();this.ai=.1;this.value=0;this.valueText="{currentTime} out of {duration}";this.pauseWhileDragging=!1;this.seekingRequestThrottle=100;this.__mediaDuration=0;this.__mediaPaused=!0;this.ho=p(this,"vds-slider-drag-start",e=>{this.Sr(e)});this._n=p(this,"vds-slider-value-change",e=>{We(e.originEvent)&&(this._e.cancel(),this.c.seek(this.value,e))});this.Vn=p(this,"vds-slider-drag-value-change",e=>{this._e(e)});this.po=p(this,"vds-slider-drag-end",e=>{this._e.cancel(),this.c.seek(this.value,e),this.Sr(e)});this._e=Ie(e=>{this.c.seeking(this.value,e)},this.seekingRequestThrottle);this.ci=!1;L(this,"currentTime",e=>{this.value=e}),L(this,"duration",e=>{this.__mediaDuration=e,this.requestUpdate("max")}),L(this,"paused",e=>{this.__mediaPaused=e})}static get styles(){return[super.styles,wr]}connectedCallback(){super.connectedCallback(),P(this,"aria-label","Media time")}get min(){return 0}set min(e){}get max(){return this.__mediaDuration}set max(e){}update(e){e.has("disabled")&&this.disabled&&this._e.cancel(),super.update(e)}disconnectedCallback(){this._e.cancel(),super.disconnectedCallback()}fr(){return"0%"}gr(){return`${Math.round(this.fillPercent)}%`}st(){return this.valueText.replace("{currentTime}",Xt(this.value)).replace("{duration}",Xt(this.__mediaDuration))}yr(){return"100%"}Sr(e){!this.pauseWhileDragging||(this.isDragging&&!this.__mediaPaused?(this.ci=!0,this.c.pause(e)):this.ci&&!this.isDragging&&this.__mediaPaused&&(this.ci=!1,this.c.play(e)))}};a([d({attribute:!1,state:!0})],B.prototype,"value",2),a([d({attribute:!1})],B.prototype,"min",1),a([d({attribute:!1})],B.prototype,"max",1),a([d({attribute:"value-text"})],B.prototype,"valueText",2),a([d({attribute:"pause-while-dragging",type:Boolean})],B.prototype,"pauseWhileDragging",2),a([d({attribute:"seeking-request-throttle",type:Number})],B.prototype,"seekingRequestThrottle",2),a([_()],B.prototype,"__mediaDuration",2),a([_()],B.prototype,"__mediaPaused",2);m("vds-time-slider",B);var Ce=class extends A{constructor(){super();this.value=100;this._n=p(this,"vds-slider-value-change",this.Mr.bind(this));this.Vn=p(this,"vds-slider-drag-value-change",this.Mr.bind(this));L(this,"volume",e=>{this.value=e*100})}connectedCallback(){super.connectedCallback(),P(this,"aria-label","Media volume")}get min(){return 0}set min(e){}get max(){return 100}set max(e){}Mr(e){let r=e.detail,s=ue(r/100,3);this.c.changeVolume(s,e)}};a([d({attribute:!1})],Ce.prototype,"min",1),a([d({attribute:!1})],Ce.prototype,"max",1),a([d({attribute:!1,state:!0})],Ce.prototype,"value",2);m("vds-volume-slider",Ce);m("vds-slider-video",we);m("vds-slider-value-text",Q);var Z=class extends y{constructor(){super(...arguments);this.s=new g;this.ni=pe.consume(this);this.__seconds=0;this.type="current";this.showHours=!1;this.padHours=!1;this.remainder=!1}static get styles(){return[b`:host{display:inline-block;contain:content}:host([hidden]){display:none}`]}get q(){return this.ni.value}connectedCallback(){super.connectedCallback(),this.Re()}update(e){(e.has("type")||e.has("remainder"))&&this.Re(),super.update(e)}disconnectedCallback(){this.s.empty(),super.disconnectedCallback()}render(){return x`${this.Dn()}`}Re(){this.s.empty();let e=this.qn(),r=(this.remainder?this.An(e):e).subscribe(s=>{this.__seconds=s});this.s.add(r)}qn(){switch(this.type){case"buffered":return this.q.bufferedAmount;case"seekable":return this.q.seekableAmount;case"duration":return this.q.duration;default:return this.q.currentTime}}An(e){return De([e,this.q.duration],([r,s])=>Math.max(0,s-r))}Dn(){return bt(this.__seconds,this.padHours,this.showHours)}};a([_()],Z.prototype,"__seconds",2),a([d()],Z.prototype,"type",2),a([d({attribute:"show-hours",type:Boolean})],Z.prototype,"showHours",2),a([d({attribute:"pad-hours",type:Boolean})],Z.prototype,"padHours",2),a([d({type:Boolean})],Z.prototype,"remainder",2);m("vds-time",Z);
